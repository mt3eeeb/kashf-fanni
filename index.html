<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ÙƒØ´Ù ÙÙ†ÙŠ</title>

<style>
body{font-family:Tahoma;background:#f4f4f4;margin:0}
.container{max-width:900px;margin:auto;background:#fff;padding:12px}
.header{text-align:center;margin-bottom:15px}
.header small{display:block;font-size:13px}
.section{margin-bottom:15px}
.section h3{background:#2ecc71;color:#fff;padding:7px;margin:0 0 8px}
.row{display:flex;gap:5px;margin-bottom:5px;flex-wrap:wrap}
input{flex:1;padding:6px;font-size:13px}
button{padding:6px;border:none;font-size:13px;cursor:pointer}
.add{background:#2ecc71;color:#fff}
.del{background:#e74c3c;color:#fff}
.gray{background:#ddd}
.small-btn{width:100%}
.result{background:#eee;padding:8px;font-size:13px}

@media print{
button{display:none}
.page-break{page-break-before:always}
}
</style>
</head>

<body>
<div class="container">

<div class="header">
<small>Ù…ÙƒØªØ¨ Ù…Ø­Ø§ÙØ¸Ø© Ù‚Ø±ÙŠØ© Ø§Ù„Ø¹Ù„ÙŠØ§</small>
<h2>ÙƒØ´Ù ÙÙ†ÙŠ</h2>
</div>

<!-- Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© -->
<div class="section">
<h3>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</h3>
<input placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„">
<input placeholder="Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨">
<input type="date">
</div>

<!-- Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø³Ø¬Ù„ -->
<div class="section">
<h3>Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø³Ø¬Ù„</h3>
<div class="row coord">
<input placeholder="Lat Ù‚Ø¨Ù„">
<input placeholder="Lat Ø¨Ø¹Ø¯">
<input placeholder="Lng Ù‚Ø¨Ù„">
<input placeholder="Lng Ø¨Ø¹Ø¯">
</div>
<button class="gray small-btn" onclick="openMaps(this)">ÙØªØ­ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</button>
</div>

<!-- Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø¨ÙˆØ§Ø¨Ø© -->
<div class="section">
<h3>Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©</h3>
<div class="row coord">
<input placeholder="Lat Ù‚Ø¨Ù„">
<input placeholder="Lat Ø¨Ø¹Ø¯">
<input placeholder="Lng Ù‚Ø¨Ù„">
<input placeholder="Lng Ø¨Ø¹Ø¯">
</div>
<button class="gray small-btn" onclick="getLocation(this)">ğŸ“ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ</button>
<button class="gray small-btn" onclick="openMaps(this)">ÙØªØ­ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</button>
</div>

<!-- Ø²ÙˆØ§ÙŠØ§ Ø§Ù„Ù…Ø²Ø±Ø¹Ø© -->
<div class="section">
<h3>Ø²ÙˆØ§ÙŠØ§ Ø§Ù„Ù…Ø²Ø±Ø¹Ø©</h3>
<div id="corners"></div>
<button class="add small-btn" onclick="addCorner()">+ Ø¥Ø¶Ø§ÙØ© Ø²Ø§ÙˆÙŠØ©</button>
<button class="gray small-btn" onclick="calcArea()">Ø§Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³Ø§Ø­Ø©</button>
<div id="areaResult" class="result">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ø¹Ø¯</div>
</div>

<div class="page-break"></div>

<!-- Ø§Ù„Ø¢Ø¨Ø§Ø± -->
<div class="section">
<h3>Ø§Ù„Ø¢Ø¨Ø§Ø±</h3>
<div id="wells"></div>
<button class="add small-btn" onclick="addWell()">+ Ø¥Ø¶Ø§ÙØ© Ø¨Ø¦Ø±</button>
</div>

<!-- Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ÙŠ -->
<div class="section">
<h3>Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ÙŠ</h3>
<div id="irrigation"></div>
<button class="add small-btn" onclick="addIrrigation()">+ Ø¥Ø¶Ø§ÙØ© Ù†Ø¸Ø§Ù… Ø±ÙŠ</button>
</div>

<!-- Ø§Ù„Ù…Ø²Ø±ÙˆØ¹Ø§Øª -->
<div class="section">
<h3>Ø§Ù„Ù…Ø²Ø±ÙˆØ¹Ø§Øª</h3>
<div id="crops"></div>
<button class="add small-btn" onclick="addCrop()">+ Ø¥Ø¶Ø§ÙØ© Ù…Ø²Ø±ÙˆØ¹</button>
</div>

<!-- Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø§Øª -->
<div class="section">
<h3>Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø§Øª</h3>
<div id="assets"></div>
<button class="add small-btn" onclick="addAsset()">+ Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¬ÙˆØ¯</button>
</div>

<!-- Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ø­Ø« -->
<div class="section">
<h3>Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ø­Ø«</h3>
<input placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ø­Ø«">
</div>

<button class="gray small-btn" onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>

</div>

<script>
// ØµÙ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª
function coordRow(){
return `
<div class="row coord">
<input placeholder="Lat Ù‚Ø¨Ù„">
<input placeholder="Lat Ø¨Ø¹Ø¯">
<input placeholder="Lng Ù‚Ø¨Ù„">
<input placeholder="Lng Ø¨Ø¹Ø¯">
<button class="del" onclick="this.parentElement.remove()">âˆ’</button>
</div>
<button class="gray small-btn" onclick="openMaps(this)">ÙØªØ­ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</button>
`;
}

// Ø¥Ø¶Ø§ÙØ© Ø¹Ù†Ø§ØµØ±
function addCorner(){corners.innerHTML+=coordRow();}
function addWell(){wells.innerHTML+=coordRow();}

function addCrop(){
crops.innerHTML+=`
<div class="row">
<input placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø²Ø±ÙˆØ¹">
<input placeholder="Ø§Ù„Ù…Ø³Ø§Ø­Ø©">
<button class="del" onclick="this.parentElement.remove()">âˆ’</button>
</div>`;
}

function addAsset(){
assets.innerHTML+=`
<div class="row">
<input placeholder="Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯">
<input placeholder="Ø§Ù„ÙˆØµÙ">
<button class="del" onclick="this.parentElement.remove()">âˆ’</button>
</div>`;
}

function addIrrigation(){
irrigation.innerHTML+=`
<div class="row">
<input placeholder="Ù†ÙˆØ¹ Ø§Ù„Ø±ÙŠ">
<input placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆØ±" oninput="calcPivot(this)">
<input placeholder="Ø§Ù„Ù…Ø²Ø±ÙˆØ¹">
<input placeholder="Ø£Ø®Ø±Ù‰">
<button class="del" onclick="this.parentElement.remove()">âˆ’</button>
</div>
<div class="result">Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ù…Ø­Ø§ÙˆØ±: <span>0</span> Ù…Â²</div>`;
}

// ÙØªØ­ Ø§Ù„Ø®Ø±ÙŠØ·Ø©
function openMaps(btn){
let r=btn.previousElementSibling.querySelectorAll("input");
let lat=r[0].value+"."+r[1].value;
let lng=r[2].value+"."+r[3].value;
window.open(`https://www.google.com/maps?q=${lat},${lng}`);
}

// ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ù„Ù„Ø¨ÙˆØ§Ø¨Ø© ÙÙ‚Ø·)
function getLocation(btn){
if(!navigator.geolocation){
alert("Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… GPS");
return;
}
navigator.geolocation.getCurrentPosition(pos=>{
let lat=pos.coords.latitude.toString().split(".");
let lng=pos.coords.longitude.toString().split(".");
let inputs=btn.previousElementSibling.querySelectorAll("input");
inputs[0].value=lat[0];
inputs[1].value=lat[1];
inputs[2].value=lng[0];
inputs[3].value=lng[1];
});
}

// Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ù…Ø­Ø§ÙˆØ±
function calcPivot(el){
let count=parseFloat(el.value)||0;
let r=500;
let area=count*Math.PI*r*r;
el.parentElement.nextElementSibling.querySelector("span").innerText=
area.toFixed(1);
}

// Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ù…Ù† Ø§Ù„Ø²ÙˆØ§ÙŠØ§
function dist(a,b,c,d){
const R=6371000;
let dLat=(c-a)*Math.PI/180;
let dLng=(d-b)*Math.PI/180;
let x=Math.sin(dLat/2)**2+
Math.cos(a*Math.PI/180)*Math.cos(c*Math.PI/180)*
Math.sin(dLng/2)**2;
return R*2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));
}

function calcArea(){
let pts=[];
document.querySelectorAll("#corners .coord").forEach(r=>{
let i=r.querySelectorAll("input");
pts.push([
parseFloat(i[0].value+"."+i[1].value),
parseFloat(i[2].value+"."+i[3].value)
]);
});
if(pts.length<3){
areaResult.innerHTML="Ø£Ø¯Ø®Ù„ 3 Ø²ÙˆØ§ÙŠØ§ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„";
return;
}
let txt="";
for(let i=0;i<pts.length;i++){
let j=(i+1)%pts.length;
txt+=`Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø²Ø§ÙˆÙŠØ© ${i+1} Ùˆ ${j+1}: ${dist(
pts[i][0],pts[i][1],pts[j][0],pts[j][1]
).toFixed(1)} Ù…<br>`;
}
let area=0;
for(let i=0;i<pts.length;i++){
let j=(i+1)%pts.length;
area+=pts[i][0]*pts[j][1]-pts[j][0]*pts[i][1];
}
area=Math.abs(area/2)*111000*111000;
areaResult.innerHTML=
txt+`<hr>Ø§Ù„Ù…Ø³Ø§Ø­Ø©: ${area.toFixed(1)} Ù…Â²<br>
Ø§Ù„Ù‡ÙƒØªØ§Ø±: ${(area/10000).toFixed(3)}<br>
Ø§Ù„Ø¯ÙˆÙ†Ù…: ${(area/1000).toFixed(2)}`;
}
</script>

</body>
</html>