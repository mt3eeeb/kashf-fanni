<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ÙƒØ´Ù ÙÙ†ÙŠ</title>

<style>
body{
  font-family: Tahoma, Arial;
  background:#f2f5f3;
  margin:0;
  padding:20px;
  font-size:13px;
}
.container{max-width:900px;margin:auto}
.header{
  text-align:center;
  border:2px solid #2e7d32;
  padding:15px;
  background:#fff;
  border-radius:6px;
  margin-bottom:20px;
}
.header h1,.header h2{margin:4px 0;color:#2e7d32}
.section{
  background:#fff;
  border:2px solid #2e7d32;
  border-radius:6px;
  margin-bottom:15px;
}
.section-title{
  background:#e8f5e9;
  padding:8px 12px;
  font-weight:bold;
  color:#2e7d32;
  border-bottom:2px solid #2e7d32;
}
.section-body{padding:12px}
.row{display:flex;gap:10px;flex-wrap:wrap}
.field{flex:1;min-width:150px}
label{display:block;color:#2e7d32;margin-bottom:4px}
input,select{
  width:100%;
  padding:6px;
  border:1px solid #2e7d32;
  border-radius:4px;
}
button{
  padding:6px 10px;
  background:#2e7d32;
  color:#fff;
  border:none;
  border-radius:4px;
  cursor:pointer;
}
button:hover{opacity:.9}

/* ===== Ø¨Ù†Ø¯ 4 Ùˆ 5 ===== */
.point,.wellRow{
  border:1px solid #ccc;
  padding:8px;
  margin-bottom:8px;
}
.coord-row{
  display:flex;
  gap:10px;
  align-items:flex-end;
}
.coord{flex:1}

@media print{
  button{display:none}
  body{background:#fff}
  @page{size:A4;margin:10mm}
}
</style>
</head>

<body>
<div class="container">

<div class="header">
  <h1>ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ØªÙ†Ù…ÙŠØ© Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠØ©</h1>
  <h2>ÙƒØ´Ù ÙÙ†ÙŠ</h2>
</div>

<!-- Ø¨Ù†Ø¯ 1 -->
<div class="section">
<div class="section-title">1ï¸âƒ£ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</div>
<div class="section-body">
<div class="row">
<div class="field"><label>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label><input></div>
<div class="field"><label>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</label><input></div>
<div class="field"><label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø²ÙŠØ§Ø±Ø©</label><input type="date"></div>
</div>
</div>
</div>

<!-- Ø¨Ù†Ø¯ 2 -->
<div class="section">
<div class="section-title">2ï¸âƒ£ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø³Ø¬Ù„</div>
<div class="section-body">
<div class="row">
<div class="field"><label>Latitude</label><input id="recordLat"></div>
<div class="field"><label>Longitude</label><input id="recordLng"></div>
</div><br>
<button onclick="openMap('recordLat','recordLng')">ğŸ“ Ø§Ù„ÙˆØµÙˆÙ„</button>
</div>
</div>

<!-- Ø¨Ù†Ø¯ 3 -->
<div class="section">
<div class="section-title">3ï¸âƒ£ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©</div>
<div class="section-body">
<div class="row">
<div class="field"><label>Latitude</label><input id="gateLat"></div>
<div class="field"><label>Longitude</label><input id="gateLng"></div>
</div><br>
<button onclick="openMap('gateLat','gateLng')">ğŸ“ Ø§Ù„ÙˆØµÙˆÙ„</button>
<button onclick="getLocation('gateLat','gateLng')">ğŸ§­ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ</button>
</div>
</div>

<!-- Ø¨Ù†Ø¯ 4 -->
<div class="section">
<div class="section-title">4ï¸âƒ£ Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø£Ø±Ø¶ ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³Ø§Ø­Ø©</div>
<div class="section-body">

<div id="points"></div>

<button onclick="addPoint()">â• Ø¥Ø¶Ø§ÙØ© Ø²Ø§ÙˆÙŠØ©</button>
<button onclick="calcArea()">ğŸ“ Ø­Ø³Ø§Ø¨</button>

<div id="areaResult" style="margin-top:10px"></div>
</div>
</div>

<!-- Ø¨Ù†Ø¯ 5 -->
<div class="section">
<div class="section-title">5ï¸âƒ£ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø¢Ø¨Ø§Ø±</div>
<div class="section-body">
<div id="wells"></div>
<button onclick="addWell()">â• Ø¥Ø¶Ø§ÙØ© Ø¨Ø¦Ø±</button>
</div>
</div>

<!-- Ø¨Ù†Ø¯ 9 -->
<div class="section">
<div class="section-title">9ï¸âƒ£ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø§Ø­Ø«</div>
<div class="section-body">
<label>Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ø­Ø«</label>
<input>
<br><br>
<button onclick="window.print()">ğŸ–¨ Ø·Ø¨Ø§Ø¹Ø©</button>
</div>
</div>

</div>

<script>
/* Ø®Ø±Ø§Ø¦Ø· */
function openMap(lat,lng){
  const la=document.getElementById(lat).value;
  const lo=document.getElementById(lng).value;
  if(!la||!lo)return alert('Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª');
  window.open(`https://maps.google.com?q=${la},${lo}`);
}
function getLocation(lat,lng){
  navigator.geolocation.getCurrentPosition(p=>{
    document.getElementById(lat).value=p.coords.latitude.toFixed(6);
    document.getElementById(lng).value=p.coords.longitude.toFixed(6);
  });
}

/* Ø¨Ù†Ø¯ 4 */
const R=6378137;
function toRad(d){return d*Math.PI/180}
function xy(lat,lon,lat0){
  return{
    x:toRad(lon)*R*Math.cos(toRad(lat0)),
    y:toRad(lat)*R
  }
}
function addPoint(){
  points.insertAdjacentHTML('beforeend',`
  <div class="point coord-row">
    <div class="coord"><label>Latitude</label><input class="lat"></div>
    <div class="coord"><label>Longitude</label><input class="lon"></div>
    <button onclick="this.parentElement.remove()">â–</button>
  </div>`);
}
function calcArea(){
  const lats=document.querySelectorAll('.lat');
  const lons=document.querySelectorAll('.lon');
  if(lats.length<3)return alert('3 Ø²ÙˆØ§ÙŠØ§ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
  let lat0=parseFloat(lats[0].value),pts=[];
  for(let i=0;i<lats.length;i++)
    pts.push(xy(+lats[i].value,+lons[i].value,lat0));
  let area=0;
  for(let i=0;i<pts.length;i++){
    let j=(i+1)%pts.length;
    area+=pts[i].x*pts[j].y-pts[j].x*pts[i].y;
  }
  area=Math.abs(area/2);
  areaResult.innerHTML=`
  ${area.toFixed(2)} Ù…Â²<br>
  ${(area/1000).toFixed(2)} Ø¯ÙˆÙ†Ù…<br>
  ${(area/10000).toFixed(2)} Ù‡ÙƒØªØ§Ø±`;
}

/* Ø¨Ù†Ø¯ 5 */
function addWell(){
  wells.insertAdjacentHTML('beforeend',`
  <div class="wellRow coord-row">
    <div class="coord"><label>Latitude</label><input></div>
    <div class="coord"><label>Longitude</label><input></div>
    <button onclick="this.parentElement.remove()">â–</button>
    <button onclick="getWell(this)">ğŸ§­</button>
  </div>`);
}
function getWell(btn){
  navigator.geolocation.getCurrentPosition(p=>{
    const r=btn.parentElement.querySelectorAll('input');
    r[0].value=p.coords.latitude.toFixed(6);
    r[1].value=p.coords.longitude.toFixed(6);
  });
}
</script>

</body>
</html>