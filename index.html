<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ÙƒØ´Ù ÙÙ†ÙŠ</title>

<style>
body{font-family:Tahoma;background:#f2f2f2;margin:0}
.container{max-width:900px;margin:auto;background:#fff;padding:10px}
h1{text-align:center;margin:5px 0}
.section{margin-bottom:15px}
.section h3{background:#2ecc71;color:#fff;padding:6px;margin:0 0 8px;font-size:15px}
.row{display:flex;gap:5px;margin-bottom:5px;flex-wrap:wrap}
input{flex:1;padding:6px;font-size:13px}
button{padding:6px;font-size:13px;border:none;cursor:pointer}
.add{background:#2ecc71;color:#fff}
.del{background:#e74c3c;color:#fff}
.gray{background:#ddd}
.mapbtn{background:#3498db;color:#fff}
.gaiabtn{background:#2c3e50;color:#fff}
.result{background:#eee;padding:6px;font-size:13px;margin-top:5px}
@media print{
 button{display:none}
 body{background:#fff}
}
</style>
</head>

<body>
<div class="container">

<h1>ÙƒØ´Ù ÙÙ†ÙŠ</h1>

<!-- Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© -->
<div class="section">
<h3>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</h3>
<input placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„">
<input placeholder="Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨">
<input type="date">
</div>

<!-- Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø³Ø¬Ù„ -->
<div class="section">
<h3>Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø³Ø¬Ù„</h3>
<div class="row">
<input id="regLat" placeholder="Latitude">
<input id="regLng" placeholder="Longitude">
</div>
<div class="row">
<button class="mapbtn" onclick="openGoogle(regLat.value,regLng.value)">Google Maps</button>
<button class="gaiabtn" onclick="openGaia(regLat.value,regLng.value)">Gaia GPS</button>
</div>
</div>

<!-- Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø¨ÙˆØ§Ø¨Ø© -->
<div class="section">
<h3>Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©</h3>
<div class="row">
<input id="gateLat" placeholder="Latitude">
<input id="gateLng" placeholder="Longitude">
</div>
<div class="row">
<button class="gray" onclick="getLocation('gateLat','gateLng')">ğŸ“ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹</button>
<button class="mapbtn" onclick="openGoogle(gateLat.value,gateLng.value)">Google Maps</button>
<button class="gaiabtn" onclick="openGaia(gateLat.value,gateLng.value)">Gaia GPS</button>
</div>
</div>

<!-- Ø§Ù„Ø²ÙˆØ§ÙŠØ§ -->
<div class="section">
<h3>Ø²ÙˆØ§ÙŠØ§ Ø§Ù„Ø£Ø±Ø¶ (ÙØ­Øµ ÙˆÙ…Ø³Ø§ÙØ§Øª)</h3>
<div id="corners"></div>
<button class="add" onclick="addCorner()">+ Ø¥Ø¶Ø§ÙØ© Ø²Ø§ÙˆÙŠØ©</button>
<button class="gray" onclick="calcDistances()">ÙØ­Øµ Ø§Ù„Ù…Ø³Ø§ÙØ§Øª</button>
<div id="cornerResult" class="result"></div>
</div>

<!-- Ù…Ø³Ø§Ø­Ø© Ø§Ù„ÙƒØ±ÙˆÙƒÙŠ -->
<div class="section">
<h3>Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø£Ø±Ø¶ (Ù…Ù† Ø§Ù„ÙƒØ±ÙˆÙƒÙŠ)</h3>
<button class="gray" onclick="calcArea()">Ø§Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³Ø§Ø­Ø©</button>
<div id="areaResult" class="result"></div>
</div>

<!-- Ø§Ù„Ø¢Ø¨Ø§Ø± -->
<div class="section">
<h3>Ø§Ù„Ø¢Ø¨Ø§Ø±</h3>
<div id="wells"></div>
<button class="add" onclick="addWell()">+ Ø¥Ø¶Ø§ÙØ© Ø¨Ø¦Ø±</button>
</div>

<!-- Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ÙŠ -->
<div class="section">
<h3>Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ÙŠ</h3>
<div class="row">
<input id="pivotCount" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆØ±">
</div>
<button class="gray" onclick="calcPivot()">Ø§Ø­Ø³Ø¨ Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø±ÙŠ</button>
<div id="pivotResult" class="result"></div>
</div>

<!-- Ø§Ù„Ù…Ø²Ø±ÙˆØ¹Ø§Øª -->
<div class="section">
<h3>Ø§Ù„Ù…Ø²Ø±ÙˆØ¹Ø§Øª</h3>
<div id="crops"></div>
<button class="add" onclick="addCrop()">+ Ø¥Ø¶Ø§ÙØ© Ù…Ø²Ø±ÙˆØ¹</button>
</div>

<!-- Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø§Øª -->
<div class="section">
<h3>Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø§Øª</h3>
<div id="assets"></div>
<button class="add" onclick="addAsset()">+ Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¬ÙˆØ¯</button>
</div>

<div class="section">
<input placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ø­Ø«">
</div>

<button class="gray" onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>

</div>

<script>
function openGoogle(lat,lng){
 if(!lat||!lng)return alert("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª");
 window.open(`https://www.google.com/maps?q=${lat},${lng}`);
}
function openGaia(lat,lng){
 if(!lat||!lng)return alert("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª");
 window.location.href=`gaiagps://open?lat=${lat}&lon=${lng}`;
}
function getLocation(latId,lngId){
 navigator.geolocation.getCurrentPosition(p=>{
  document.getElementById(latId).value=p.coords.latitude.toFixed(6);
  document.getElementById(lngId).value=p.coords.longitude.toFixed(6);
 });
}

function addCorner(){
 corners.innerHTML+=`
 <div class="row">
 <input placeholder="Lat">
 <input placeholder="Lng">
 <button class="del" onclick="this.parentElement.remove()">âˆ’</button>
 </div>`;
}

function calcDistances(){
 let pts=[...corners.querySelectorAll('.row')].map(r=>{
  let i=r.querySelectorAll('input');
  return [parseFloat(i[0].value),parseFloat(i[1].value)];
 }).filter(p=>!isNaN(p[0]));
 let t='';
 for(let i=0;i<pts.length;i++){
  let j=(i+1)%pts.length;
  t+=`Ø§Ù„Ù…Ø³Ø§ÙØ© ${i+1}-${j+1}: ${dist(pts[i],pts[j]).toFixed(1)} Ù…<br>`;
 }
 cornerResult.innerHTML=t||'Ø£Ø¯Ø®Ù„ Ø²ÙˆØ§ÙŠØ§';
}

function calcArea(){
 let pts=[...corners.querySelectorAll('.row')].map(r=>{
  let i=r.querySelectorAll('input');
  return [parseFloat(i[0].value),parseFloat(i[1].value)];
 }).filter(p=>!isNaN(p[0]));
 if(pts.length<3)return alert("Ø£Ø¯Ø®Ù„ 3 Ø²ÙˆØ§ÙŠØ§ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");
 let area=0;
 for(let i=0;i<pts.length;i++){
  let j=(i+1)%pts.length;
  area+=pts[i][1]*pts[j][0]-pts[j][1]*pts[i][0];
 }
 area=Math.abs(area/2)*111000*111000;
 areaResult.innerHTML=
 `Ù…Â²: ${area.toFixed(2)}<br>
 Ù‡ÙƒØªØ§Ø±: ${(area/10000).toFixed(3)}<br>
 Ø¯ÙˆÙ†Ù…: ${(area/1000).toFixed(2)}`;
}

function dist(a,b){
 const R=6371000;
 let dLat=(b[0]-a[0])*Math.PI/180;
 let dLng=(b[1]-a[1])*Math.PI/180;
 let x=Math.sin(dLat/2)**2+
 Math.cos(a[0]*Math.PI/180)*Math.cos(b[0]*Math.PI/180)*
 Math.sin(dLng/2)**2;
 return R*2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));
}

function addWell(){
 wells.innerHTML+=`
 <div class="row">
 <input placeholder="Lat">
 <input placeholder="Lng">
 <button class="mapbtn" onclick="openGoogle(this.previousElementSibling.previousElementSibling.value,this.previousElementSibling.value)">Google</button>
 <button class="gaiabtn" onclick="openGaia(this.previousElementSibling.previousElementSibling.value,this.previousElementSibling.value)">Gaia</button>
 <button class="gray" onclick="getLocation(this.parentElement.children[0].id,this.parentElement.children[1].id)">ğŸ“</button>
 </div>`;
}

function calcPivot(){
 let n=parseFloat(pivotCount.value);
 if(isNaN(n))return;
 let r=400;
 let area=n*Math.PI*r*r;
 pivotResult.innerHTML=
 `Ù…Â²: ${area.toFixed(0)}<br>
 Ù‡ÙƒØªØ§Ø±: ${(area/10000).toFixed(2)}<br>
 Ø¯ÙˆÙ†Ù…: ${(area/1000).toFixed(1)}`;
}

function addCrop(){crops.innerHTML+=`<div class="row"><input placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø²Ø±ÙˆØ¹"><input placeholder="Ø§Ù„Ù…Ø³Ø§Ø­Ø©"></div>`;}
function addAsset(){assets.innerHTML+=`<div class="row"><input placeholder="Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯"><input placeholder="Ø§Ù„ÙˆØµÙ"></div>`;}
</script>

</body>
</html>