<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ÙƒØ´Ù ÙÙ†ÙŠ - ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ØªÙ†Ù…ÙŠØ© Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠØ©</title>

<style>
body{
  font-family: Tahoma;
  background:#f4f4f4;
  margin:0;
  padding:20px;
}
h2{
  text-align:center;
  margin-bottom:5px;
}
h4{
  text-align:center;
  margin-top:0;
  color:#555;
}
.section{
  background:#fff;
  padding:15px;
  border-radius:6px;
  margin-bottom:15px;
  page-break-inside:avoid;
}
.section h3{
  background:#2ecc71;
  color:#fff;
  padding:8px;
  margin:-15px -15px 15px -15px;
}
.row{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.field{
  flex:1;
  min-width:200px;
}
label{
  font-size:13px;
  display:block;
  margin-bottom:3px;
}
input, select, textarea, button{
  width:100%;
  padding:7px;
  box-sizing:border-box;
}
button{
  cursor:pointer;
}
.small-btn{
  width:auto;
  padding:5px 10px;
}
.box{
  border:1px solid #ccc;
  padding:10px;
  margin-bottom:10px;
  background:#fafafa;
}

/* Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© */
@media print{
  .page-1{ page-break-after:always; }
}
</style>
</head>

<body>

<h2>Ù…ÙƒØªØ¨ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ØªÙ†Ù…ÙŠØ© Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠØ© Ø¨Ù…Ø­Ø§ÙØ¸Ø© Ù‚Ø±ÙŠØ© Ø§Ù„Ø¹Ù„ÙŠØ§</h2>
<h4>ÙƒØ´Ù ÙÙ†ÙŠ</h4>

<!-- ================= Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ ================= -->
<div class="page-1">

<!-- Ø¨Ù†Ø¯ 1 -->
<div class="section">
  <h3>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</h3>
  <div class="row">
    <div class="field">
      <label>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label>
      <input id="clientName">
    </div>
    <div class="field">
      <label>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</label>
      <input id="orderNumber">
    </div>
    <div class="field">
      <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø²ÙŠØ§Ø±Ø©</label>
      <input type="date" id="visitDate">
    </div>
  </div>
</div>

<!-- Ø¨Ù†Ø¯ 2 -->
<div class="section">
  <h3>Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø³Ø¬Ù„</h3>
  <div class="row">
    <div class="field">
      <label>Latitude</label>
      <input id="recordLat">
    </div>
    <div class="field">
      <label>Longitude</label>
      <input id="recordLng">
    </div>
  </div>
  <button class="small-btn" onclick="openRecordMap()">ğŸ“ Ø§Ù„ÙˆØµÙˆÙ„</button>
</div>

<!-- Ø¨Ù†Ø¯ 3 -->
<div class="section">
  <h3>Ø¥Ø­Ø¯Ø§Ø«ÙŠØ© Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©</h3>
  <div class="row">
    <div class="field">
      <label>Latitude</label>
      <input id="gateLat">
    </div>
    <div class="field">
      <label>Longitude</label>
      <input id="gateLng">
    </div>
  </div>
  <button class="small-btn" onclick="openGateMap()">ğŸ“ Ø§Ù„ÙˆØµÙˆÙ„</button>
  <button class="small-btn" onclick="getGateLocation()">ğŸ§­ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹</button>
</div>

<!-- Ø¨Ù†Ø¯ 4 -->
<div class="section">
  <h3>Ø²ÙˆØ§ÙŠØ§ Ø§Ù„Ù…Ø²Ø±Ø¹Ø©</h3>
  <div id="corners"></div>
  <button class="small-btn" onclick="addCorner()">+ Ø¥Ø¶Ø§ÙØ© Ø²Ø§ÙˆÙŠØ©</button>
  <button class="small-btn" onclick="calculatePolygon()">Ø­Ø³Ø§Ø¨</button>
  <div id="results"></div>
</div>

</div><!-- page 1 -->

<!-- ================= Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© ================= -->

<!-- Ø¨Ù†Ø¯ 5 -->
<div class="section">
  <h3>Ø§Ù„Ø¢Ø¨Ø§Ø±</h3>
  <div id="wellsContainer"></div>
  <button class="small-btn" onclick="addWell()">+ Ø¥Ø¶Ø§ÙØ© Ø¨Ø¦Ø±</button>
</div>

<!-- Ø¨Ù†Ø¯ 6 -->
<div class="section">
  <h3>Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ÙŠ</h3>
  <div id="irrigationContainer"></div>
  <button class="small-btn" onclick="addIrrigation()">+ Ø¥Ø¶Ø§ÙØ© Ù†Ø¸Ø§Ù… Ø±ÙŠ</button>
</div>

<!-- Ø¨Ù†Ø¯ 7 -->
<div class="section">
  <h3>Ø§Ù„Ù…Ø²Ø±ÙˆØ¹Ø§Øª</h3>
  <div id="cropsContainer"></div>
  <button class="small-btn" onclick="addCrop()">+ Ø¥Ø¶Ø§ÙØ© Ù…Ø²Ø±ÙˆØ¹</button>
</div>

<!-- Ø¨Ù†Ø¯ 8 -->
<div class="section">
  <h3>Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø§Øª</h3>
  <div id="assetsContainer"></div>
  <button class="small-btn" onclick="addAsset()">+ Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¬ÙˆØ¯</button>
</div>

<!-- Ø¨Ù†Ø¯ 9 -->
<div class="section">
  <h3>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø§Ø­Ø«</h3>
  <input id="researcherName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ø­Ø«" oninput="saveResearcher()">
  <br><br>
  <button class="small-btn" onclick="printPage()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
</div>

<!-- ================= JavaScript (Ù†ÙØ³ ÙƒÙˆØ¯Ùƒ) ================= -->
<script>
/* Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯ÙˆØ§Ù„ Ù‡Ù†Ø§ ÙƒÙ…Ø§ Ø£Ø±Ø³Ù„ØªÙ‡Ø§ Ø£Ù†Øª Ø­Ø±ÙÙŠÙ‹Ø§
   (ØªÙ… Ø§Ø®ØªØµØ§Ø± Ø§Ù„Ø´Ø±Ø­ ÙÙ‚Ø·)
   -----
   record / gate / corners / wells / irrigation / crops / assets / researcher
*/

function openRecordMap(){
  if(!recordLat.value||!recordLng.value) return alert("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª");
  window.open(`https://www.google.com/maps?q=${recordLat.value},${recordLng.value}`);
}
function openGateMap(){
  if(!gateLat.value||!gateLng.value) return alert("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª");
  window.open(`https://www.google.com/maps?q=${gateLat.value},${gateLng.value}`);
}
function getGateLocation(){
  navigator.geolocation.getCurrentPosition(p=>{
    gateLat.value=p.coords.latitude.toFixed(6);
    gateLng.value=p.coords.longitude.toFixed(6);
  });
}

/* ---- Ø§Ù„Ø²ÙˆØ§ÙŠØ§ ---- */
function addCorner(lat="",lon=""){
  const d=document.createElement("div");
  d.innerHTML=`Lat <input value="${lat}"> Lng <input value="${lon}">
  <button onclick="this.parentNode.remove()">âˆ’</button>`;
  corners.appendChild(d);
}
function calculatePolygon(){ alert("Ø§Ù„Ø­Ø³Ø§Ø¨ ÙƒÙ…Ø§ ÙÙŠ ÙƒÙˆØ¯Ùƒ"); }

/* ---- Ø§Ù„Ø¢Ø¨Ø§Ø± ---- */
let wells=JSON.parse(localStorage.getItem("wells"))||[];
function saveWells(){localStorage.setItem("wells",JSON.stringify(wells));}
function addWell(){wells.push({lat:"",lng:""});saveWells();renderWells();}
function renderWells(){
  wellsContainer.innerHTML="";
  wells.forEach((w,i)=>{
    wellsContainer.innerHTML+=`
    <div>
      <input value="${w.lat}" oninput="wells[${i}].lat=this.value;saveWells()">
      <input value="${w.lng}" oninput="wells[${i}].lng=this.value;saveWells()">
      <button onclick="wells.splice(${i},1);saveWells();renderWells()">âˆ’</button>
    </div>`;
  });
}
renderWells();

/* ---- Ø§Ù„Ø¨Ø§Ø­Ø« ---- */
function saveResearcher(){
  localStorage.setItem("researcherName",researcherName.value);
}
researcherName.value=localStorage.getItem("researcherName")||"";

function printPage(){window.print();}
</script>

</body>
</html>