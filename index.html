<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù†Ù…ÙˆØ°Ø¬ ÙƒØ´Ù Ø²Ø±Ø§Ø¹ÙŠ</title>

<style>
body{
  font-family:Tahoma;
  background:#f2f2f2;
  padding:20px;
  margin:0;
}
.section{
  background:#fff;
  border-radius:6px;
  padding:15px;
  margin-bottom:15px;
}
.section h3{
  background:#27ae60;
  color:#fff;
  padding:8px;
  margin:-15px -15px 15px -15px;
}
.row{display:flex;gap:10px}
.field{flex:1}
input,select,textarea,button{
  width:100%;
  padding:6px;
  margin-top:4px;
  box-sizing:border-box;
}
button{cursor:pointer}
.item{
  border:1px solid #ccc;
  padding:10px;
  margin-bottom:8px;
}
@media print{
  .no-print{display:none}
}
</style>
</head>

<body>

<!-- Ø¨Ù†Ø¯ 1 -->
<div class="section">
<h3>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</h3>
<div class="row">
  <div class="field"><label>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label><input id="clientName"></div>
  <div class="field"><label>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</label><input id="orderNumber"></div>
  <div class="field"><label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø²ÙŠØ§Ø±Ø©</label><input type="date" id="visitDate"></div>
</div>
</div>

<!-- Ø¨Ù†Ø¯ 2 -->
<div class="section">
<h3>Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø³Ø¬Ù„</h3>
<div class="row">
  <div class="field"><label>Latitude</label><input id="recordLat"></div>
  <div class="field"><label>Longitude</label><input id="recordLng"></div>
</div>
<button onclick="openMap(recordLat,recordLng)">ğŸ“ Ø®Ø±Ø§Ø¦Ø·</button>
</div>

<!-- Ø¨Ù†Ø¯ 3 -->
<div class="section">
<h3>Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©</h3>
<div class="row">
  <div class="field"><label>Latitude</label><input id="gateLat"></div>
  <div class="field"><label>Longitude</label><input id="gateLng"></div>
</div>
<button onclick="getLocation(gateLat,gateLng)">ğŸ§­ ØªØ­Ø¯ÙŠØ¯</button>
<button onclick="openMap(gateLat,gateLng)">ğŸ“ Ø®Ø±Ø§Ø¦Ø·</button>
</div>

<!-- Ø¨Ù†Ø¯ 4 -->
<div class="section">
<h3>Ø²ÙˆØ§ÙŠØ§ Ø§Ù„Ù…Ø²Ø±Ø¹Ø©</h3>
<div id="corners"></div>
<button onclick="addCorner()">+ Ø¥Ø¶Ø§ÙØ© Ø²Ø§ÙˆÙŠØ©</button>
</div>

<!-- Ø¨Ù†Ø¯ 5 -->
<div class="section">
<h3>Ø§Ù„Ø¢Ø¨Ø§Ø±</h3>
<div id="wells"></div>
<button onclick="addWell()">+ Ø¥Ø¶Ø§ÙØ© Ø¨Ø¦Ø±</button>
</div>

<!-- Ø¨Ù†Ø¯ 6 -->
<div class="section">
<h3>Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ÙŠ</h3>
<div id="irrigation"></div>
<button onclick="addIrrigation()">+ Ø¥Ø¶Ø§ÙØ© Ù†Ø¸Ø§Ù… Ø±ÙŠ</button>
</div>

<!-- Ø¨Ù†Ø¯ 7 -->
<div class="section">
<h3>Ø§Ù„Ù…Ø²Ø±ÙˆØ¹Ø§Øª</h3>
<div id="crops"></div>
<button onclick="addCrop()">+ Ø¥Ø¶Ø§ÙØ© Ù…Ø²Ø±ÙˆØ¹</button>
</div>

<!-- Ø¨Ù†Ø¯ 8 -->
<div class="section">
<h3>Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø§Øª</h3>
<div id="assets"></div>
<button onclick="addAsset()">+ Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¬ÙˆØ¯</button>
</div>

<!-- Ø¨Ù†Ø¯ 9 -->
<div class="section">
<h3>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø§Ø­Ø«</h3>
<input id="researcher" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ø­Ø«" oninput="saveAll()">
</div>

<div class="no-print">
<button onclick="saveAll()">ğŸ’¾ Ø­ÙØ¸</button>
<button onclick="clearAll()">ğŸ—‘ï¸ Ù…Ø³Ø­</button>
<button onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
</div>

<script>
/* Ø£Ø¯ÙˆØ§Øª Ø¹Ø§Ù…Ø© */
function openMap(lat,lng){
  if(!lat.value||!lng.value){alert("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª");return;}
  window.open(`https://maps.google.com?q=${lat.value},${lng.value}`);
}
function getLocation(lat,lng){
  navigator.geolocation.getCurrentPosition(p=>{
    lat.value=p.coords.latitude.toFixed(6);
    lng.value=p.coords.longitude.toFixed(6);
    saveAll();
  });
}

/* Ø²ÙˆØ§ÙŠØ§ */
let corners=[];
function addCorner(){
  corners.push({lat:"",lng:""});
  renderCorners();
}
function renderCorners(){
  cornersDiv.innerHTML="";
  corners.forEach((c,i)=>{
    cornersDiv.innerHTML+=`
    <div class="item">
      <input placeholder="Lat" value="${c.lat}"
        oninput="corners[${i}].lat=this.value;saveAll()">
      <input placeholder="Lng" value="${c.lng}"
        oninput="corners[${i}].lng=this.value;saveAll()">
      <button onclick="corners.splice(${i},1);renderCorners()">âˆ’</button>
    </div>`;
  });
}
const cornersDiv=document.getElementById("corners");

/* Ø§Ù„Ø¢Ø¨Ø§Ø± */
let wells=[];
function addWell(){
  wells.push({lat:"",lng:""});
  renderWells();
}
function renderWells(){
  wellsDiv.innerHTML="";
  wells.forEach((w,i)=>{
    wellsDiv.innerHTML+=`
    <div class="item">
      <input placeholder="Lat" value="${w.lat}"
        oninput="wells[${i}].lat=this.value;saveAll()">
      <input placeholder="Lng" value="${w.lng}"
        oninput="wells[${i}].lng=this.value;saveAll()">
      <button onclick="wells.splice(${i},1);renderWells()">âˆ’</button>
    </div>`;
  });
}
const wellsDiv=document.getElementById("wells");

/* Ø§Ù„Ø±ÙŠ */
let irrigation=[];
function addIrrigation(){
  irrigation.push({type:"",count:0});
  renderIrr();
}
function renderIrr(){
  irrigationDiv.innerHTML="";
  irrigation.forEach((r,i)=>{
    irrigationDiv.innerHTML+=`
    <div class="item">
      <input placeholder="Ù†ÙˆØ¹ Ø§Ù„Ø±ÙŠ" value="${r.type}"
        oninput="irrigation[${i}].type=this.value;saveAll()">
      <input type="number" placeholder="Ø§Ù„Ø¹Ø¯Ø¯" value="${r.count}"
        oninput="irrigation[${i}].count=this.value;saveAll()">
      <button onclick="irrigation.splice(${i},1);renderIrr()">âˆ’</button>
    </div>`;
  });
}
const irrigationDiv=document.getElementById("irrigation");

/* Ø§Ù„Ù…Ø²Ø±ÙˆØ¹Ø§Øª */
let crops=[];
function addCrop(){
  crops.push({type:"",count:0});
  renderCrops();
}
function renderCrops(){
  cropsDiv.innerHTML="";
  crops.forEach((c,i)=>{
    cropsDiv.innerHTML+=`
    <div class="item">
      <input placeholder="Ø§Ù„Ù†ÙˆØ¹" value="${c.type}"
        oninput="crops[${i}].type=this.value;saveAll()">
      <input type="number" placeholder="Ø§Ù„Ø¹Ø¯Ø¯" value="${c.count}"
        oninput="crops[${i}].count=this.value;saveAll()">
      <button onclick="crops.splice(${i},1);renderCrops()">âˆ’</button>
    </div>`;
  });
}
const cropsDiv=document.getElementById("crops");

/* Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø§Øª */
let assets=[];
function addAsset(){
  assets.push({name:"",count:0});
  renderAssets();
}
function renderAssets(){
  assetsDiv.innerHTML="";
  assets.forEach((a,i)=>{
    assetsDiv.innerHTML+=`
    <div class="item">
      <input placeholder="Ø§Ù„ÙˆØµÙ" value="${a.name}"
        oninput="assets[${i}].name=this.value;saveAll()">
      <input type="number" placeholder="Ø§Ù„Ø¹Ø¯Ø¯" value="${a.count}"
        oninput="assets[${i}].count=this.value;saveAll()">
      <button onclick="assets.splice(${i},1);renderAssets()">âˆ’</button>
    </div>`;
  });
}
const assetsDiv=document.getElementById("assets");

/* Ø­ÙØ¸ */
function saveAll(){
  const data={
    clientName:clientName.value,
    orderNumber:orderNumber.value,
    visitDate:visitDate.value,
    recordLat:recordLat.value,
    recordLng:recordLng.value,
    gateLat:gateLat.value,
    gateLng:gateLng.value,
    researcher:researcher.value,
    corners,wells,irrigation,crops,assets
  };
  localStorage.setItem("farmForm",JSON.stringify(data));
}

/* ØªØ­Ù…ÙŠÙ„ */
(function(){
  const d=JSON.parse(localStorage.getItem("farmForm")||"{}");
  Object.assign(window,d);
  clientName.value=d.clientName||"";
  orderNumber.value=d.orderNumber||"";
  visitDate.value=d.visitDate||"";
  recordLat.value=d.recordLat||"";
  recordLng.value=d.recordLng||"";
  gateLat.value=d.gateLat||"";
  gateLng.value=d.gateLng||"";
  researcher.value=d.researcher||"";
  corners=d.corners||[];
  wells=d.wells||[];
  irrigation=d.irrigation||[];
  crops=d.crops||[];
  assets=d.assets||[];
  renderCorners();renderWells();renderIrr();renderCrops();renderAssets();
})();

function clearAll(){
  if(confirm("Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ")){
    localStorage.clear();
    location.reload();
  }
}
</script>

</body>
</html>