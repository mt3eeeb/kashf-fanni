<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ÙƒØ´Ù ÙÙ†ÙŠ</title>
<style>
body{font-family:Tahoma;background:#f5f5f5;margin:0}
header{background:#2ecc71;color:#fff;padding:15px;text-align:center}
section{background:#fff;margin:15px;border-radius:6px;overflow:hidden}
h2{margin:0;background:#2ecc71;color:#fff;padding:10px;font-size:16px}
.row{display:flex;gap:10px;padding:10px}
input,select,button{padding:8px;width:100%}
button{cursor:pointer}
.small{width:48%}
.actions{display:flex;gap:5px}
.add{background:#3498db;color:#fff}
.del{background:#e74c3c;color:#fff}
.calc{background:#2ecc71;color:#fff}
.print{background:#111;color:#fff}
.result{padding:10px;font-weight:bold}
@media print{
  .no-print{display:none}
  section{page-break-inside:avoid}
}
</style>
</head>

<body>

<header>
<h1>ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ØªÙ†Ù…ÙŠØ© Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠØ© â€“ Ù…ÙƒØªØ¨ Ù…Ø­Ø§ÙØ¸Ø© Ù‚Ø±ÙŠØ© Ø§Ù„Ø¹Ù„ÙŠØ§</h1>
<p>ÙƒØ´Ù ÙÙ†ÙŠ</p>
</header>

<!-- 1 Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© -->
<section>
<h2>1ï¸âƒ£ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</h2>
<div class="row">
<input placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„" id="client">
<input placeholder="Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨" id="order">
<input type="date" id="date">
</div>
</section>

<!-- 2 Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø³Ø¬Ù„ -->
<section>
<h2>2ï¸âƒ£ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø³Ø¬Ù„</h2>
<div class="row">
<input placeholder="Latitude" id="regLat">
<input placeholder="Longitude" id="regLng">
<button onclick="goMap(regLat.value,regLng.value)">Ø§Ù„ÙˆØµÙˆÙ„</button>
</div>
</section>

<!-- 3 Ø§Ù„Ø¨ÙˆØ§Ø¨Ø© -->
<section>
<h2>3ï¸âƒ£ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ© Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©</h2>
<div class="row">
<input placeholder="Latitude" id="gateLat">
<input placeholder="Longitude" id="gateLng">
<div class="actions">
<button onclick="locate(gateLat,gateLng)">ØªØ­Ø¯ÙŠØ¯</button>
<button onclick="goMap(gateLat.value,gateLng.value)">Ø§Ù„ÙˆØµÙˆÙ„</button>
</div>
</div>
</section>

<!-- 4 Ø²ÙˆØ§ÙŠØ§ Ø§Ù„Ù…Ø²Ø±Ø¹Ø© -->
<section>
<h2>4ï¸âƒ£ Ø²ÙˆØ§ÙŠØ§ Ø§Ù„Ù…Ø²Ø±Ø¹Ø©</h2>
<div id="corners"></div>
<div class="row no-print">
<button class="add" onclick="addCorner()">+ Ø¥Ø¶Ø§ÙØ© Ø²Ø§ÙˆÙŠØ©</button>
<button class="calc" onclick="calcArea()">Ø­Ø³Ø§Ø¨</button>
</div>
<div class="result" id="areaResult"></div>
</section>

<!-- 5 Ø§Ù„Ø¢Ø¨Ø§Ø± -->
<section>
<h2>5ï¸âƒ£ Ø§Ù„Ø¢Ø¨Ø§Ø±</h2>
<div id="wells"></div>
<div class="row no-print">
<button class="add" onclick="addWell()">+ Ø¥Ø¶Ø§ÙØ© Ø¨Ø¦Ø±</button>
</div>
</section>

<!-- 6 Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ÙŠ -->
<section>
<h2>6ï¸âƒ£ Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ÙŠ</h2>
<div class="row">
<select id="irrigation" onchange="irrigationUI()">
<option value="">Ø§Ø®ØªØ± Ø§Ù„Ù†ÙˆØ¹</option>
<option value="sprinkler">Ø±Ø´Ø§Ø´</option>
<option value="drip">ØªÙ†Ù‚ÙŠØ·</option>
<option value="flood">ØºÙ…Ø±</option>
</select>
</div>
<div id="irrigationFields"></div>
</section>

<!-- 7 Ø§Ù„Ù…Ø²Ø±ÙˆØ¹Ø§Øª -->
<section>
<h2>7ï¸âƒ£ Ø§Ù„Ù…Ø²Ø±ÙˆØ¹Ø§Øª</h2>
<div class="row">
<select id="cropType" onchange="cropUI()">
<option>Ù†Ø®ÙŠÙ„</option>
<option>Ù…ØµØ¯Ø§Øª Ø±ÙŠØ§Ø­</option>
<option>Ø­Ù…Ø¶ÙŠØ§Øª</option>
<option>Ø¢Ø®Ø±</option>
</select>
<input id="cropOther" placeholder="Ù†ÙˆØ¹ Ø¢Ø®Ø±" style="display:none">
<input type="number" id="plants" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ø´ØªÙ„Ø§Øª" oninput="calcPlants()">
</div>
<div class="result" id="plantArea"></div>
</section>

<!-- 8 Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø§Øª -->
<section>
<h2>8ï¸âƒ£ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø§Øª</h2>
<div id="assets"></div>
<div class="row no-print">
<button class="add" onclick="addAsset()">+ Ø¥Ø¶Ø§ÙØ©</button>
</div>
</section>

<!-- 9 Ø§Ù„Ø¨Ø§Ø­Ø« -->
<section>
<h2>9ï¸âƒ£ Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ø­Ø«</h2>
<div class="row">
<input id="researcher">
</div>
</section>

<div class="row no-print">
<button class="print" onclick="window.print()">Ø·Ø¨Ø§Ø¹Ø© PDF</button>
<button class="del" onclick="localStorage.clear();location.reload()">Ù…Ø³Ø­ ÙƒØ´Ù Ø¬Ø¯ÙŠØ¯</button>
</div>

<script>
function goMap(lat,lng){
 if(!lat||!lng)return;
 window.open(`https://www.google.com/maps?q=${lat},${lng}`);
}
function locate(lat,lng){
 navigator.geolocation.getCurrentPosition(p=>{
  lat.value=p.coords.latitude;
  lng.value=p.coords.longitude;
 });
}

/* Ø²ÙˆØ§ÙŠØ§ */
function addCorner(){
 let d=document.createElement('div');
 d.className='row';
 d.innerHTML=`<input placeholder="Lat"><input placeholder="Lng"><button class="del" onclick="this.parentNode.remove()">-</button>`;
 corners.appendChild(d);
}
function hav(a,b,c,d){
 let R=6371000;
 let x=(c-a)*Math.PI/180;
 let y=(d-b)*Math.PI/180;
 return Math.sqrt(x*x+y*y)*R;
}
function calcArea(){
 let pts=[...corners.children].map(r=>({
  lat:parseFloat(r.children[0].value),
  lng:parseFloat(r.children[1].value)
 })).filter(p=>!isNaN(p.lat));
 if(pts.length<3)return;
 let p=0;
 for(let i=0;i<pts.length;i++){
  let j=(i+1)%pts.length;
  p+=pts[i].lat*pts[j].lng-pts[j].lat*pts[i].lng;
 }
 let area=Math.abs(p)*12365;
 areaResult.innerHTML=
 `Ø§Ù„Ù…Ø³Ø§Ø­Ø©: ${area.toFixed(0)} Ù…Â² | ${(area/10000).toFixed(2)} Ù‡ÙƒØªØ§Ø± | ${(area/1000).toFixed(2)} Ø¯ÙˆÙ†Ù…`;
}

/* Ø§Ù„Ø¢Ø¨Ø§Ø± */
function addWell(){
 let d=document.createElement('div');
 d.className='row';
 d.innerHTML=`<input placeholder="Lat"><input placeholder="Lng">
 <button onclick="locate(this.previousElementSibling.previousElementSibling,this.previousElementSibling)">ğŸ“</button>
 <button onclick="goMap(this.previousElementSibling.previousElementSibling.value,this.previousElementSibling.value)">â¡</button>
 <button class="del" onclick="this.parentNode.remove()">-</button>`;
 wells.appendChild(d);
}

/* Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ÙŠ */
function irrigationUI(){
 irrigationFields.innerHTML='';
 let t=irrigation.value;
 if(t==='sprinkler')
 irrigationFields.innerHTML=`<div class="row"><input type="number" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¨Ø±Ø§Ø¬"><input type="number" placeholder="Ø·ÙˆÙ„ Ø§Ù„Ø¨Ø±Ø¬"></div>`;
 if(t==='drip')
 irrigationFields.innerHTML=`<div class="row"><input type="number" placeholder="Ø·ÙˆÙ„ Ø§Ù„ØªÙ†Ù‚ÙŠØ·"></div>`;
 if(t==='flood')
 irrigationFields.innerHTML=`<div class="row"><input type="number" placeholder="Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ù…Â²"></div>`;
}

/* Ø§Ù„Ù…Ø²Ø±ÙˆØ¹Ø§Øª */
function cropUI(){
 cropOther.style.display=(cropType.value==='Ø¢Ø®Ø±'||cropType.value==='Ø­Ù…Ø¶ÙŠØ§Øª')?'block':'none';
}
function calcPlants(){
 let n=plants.value||0;
 let area=n*10;
 plantArea.innerHTML=`${area} Ù…Â² | ${(area/10000).toFixed(2)} Ù‡ÙƒØªØ§Ø± | ${(area/1000).toFixed(2)} Ø¯ÙˆÙ†Ù…`;
}

/* Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø§Øª */
function addAsset(){
 let d=document.createElement('div');
 d.className='row';
 d.innerHTML=`<select>
 <option>Ù…Ø¨Ø§Ù†ÙŠ</option><option>Ù…ÙˆØ¬ÙˆØ¯Ø§Øª Ø¨Ø¦Ø±</option><option>Ø£Ø®Ø±Ù‰</option>
 </select>
 <input placeholder="Ø§Ù„ÙˆØµÙ">
 <input type="number" placeholder="Ø§Ù„Ø¹Ø¯Ø¯">
 <button class="del" onclick="this.parentNode.remove()">-</button>`;
 assets.appendChild(d);
}
</script>

</body>
</html>