<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ูุดู ููู</title>
<style>
body{
  font-family: Tahoma, Arial;
  background:#f4f6f8;
  margin:0;
  padding:20px;
}
.page{
  background:#fff;
  max-width:900px;
  margin:auto;
  padding:25px;
  border-radius:10px;
  box-shadow:0 0 10px rgba(0,0,0,.1);
}
h1,h2{
  text-align:center;
  margin:5px 0;
}
h2{color:#2c5e8f}
.section{
  border:1px solid #ddd;
  padding:15px;
  margin:15px 0;
  border-radius:8px;
}
.section h3{
  margin-top:0;
  color:#1f4e79;
}
.row{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.row input, select, textarea{
  padding:6px;
  width:100%;
}
.col{
  flex:1;
  min-width:150px;
}
button{
  padding:6px 10px;
  margin:3px;
  cursor:pointer;
}
.small{font-size:13px;color:#555}
</style>
</head>

<body>
<div class="page">

<h1>ููุชุจ ุตูุฏูู ุงูุชูููุฉ ุงูุฒุฑุงุนูุฉ ุจูุญุงูุธุฉ ูุฑูุฉ ุงูุนููุง</h1>
<h2>ูุดู ููู</h2>

<!-- 1 -->
<div class="section">
<h3>1๏ธโฃ ุงูุจูุงูุงุช ุงูุนุงูุฉ</h3>
<div class="row">
  <div class="col"><input placeholder="ุงุณู ุงูุนููู" id="client"></div>
  <div class="col"><input placeholder="ุฑูู ุงูุทูุจ" id="order"></div>
  <div class="col"><input type="date" id="visit"></div>
</div>
</div>

<!-- 2 -->
<div class="section">
<h3>2๏ธโฃ ุฅุญุฏุงุซูุงุช ุงูุณุฌู</h3>
<input id="regLat" placeholder="Latitude">
<input id="regLng" placeholder="Longitude">
<button onclick="openMap(regLat.value,regLng.value)">๐บ๏ธ ูุตูู</button>
</div>

<!-- 3 -->
<div class="section">
<h3>3๏ธโฃ ุฅุญุฏุงุซูุงุช ุงูุจูุงุจุฉ</h3>
<input id="gateLat" placeholder="Latitude">
<input id="gateLng" placeholder="Longitude">
<button onclick="locate('gateLat','gateLng')">๐ ุชุญุฏูุฏ</button>
<button onclick="openMap(gateLat.value,gateLng.value)">๐บ๏ธ ูุตูู</button>
</div>

<!-- 4 -->
<div class="section">
<h3>4๏ธโฃ ุฒูุงูุง ุงููุฒุฑุนุฉ</h3>
<div id="angles"></div>
<button onclick="addAngle()">โ ุฅุถุงูุฉ ุฒุงููุฉ</button>
<p class="small" id="areaResult"></p>
</div>

<!-- 5 -->
<div class="section">
<h3>5๏ธโฃ ุงูุขุจุงุฑ</h3>
<div id="wells"></div>
<button onclick="addWell()">โ ุฅุถุงูุฉ ุจุฆุฑ</button>
</div>

<!-- 6 -->
<div class="section">
<h3>6๏ธโฃ ูุธุงู ุงูุฑู</h3>
ุนุฏุฏ ุงูุฃุจุฑุงุฌ <input id="towers" type="number">
ุทูู ุงูุจุฑุฌ <input id="towerLen" type="number">
<select id="crop">
  <option>ููุญ</option>
  <option>ุฃุนูุงู</option>
  <option>ุฎุถุฑู</option>
  <option value="other">ุขุฎุฑ</option>
</select>
<input id="cropOther" placeholder="ุงูุชุจ ุงูููุน" style="display:none">
<p class="small" id="irrigResult"></p>
</div>

<!-- 7 -->
<div class="section">
<h3>7๏ธโฃ ุงููุฒุฑูุนุงุช</h3>
<div id="plants"></div>
<button onclick="addPlant()">โ ุฅุถุงูุฉ</button>
</div>

<!-- 8 -->
<div class="section">
<h3>8๏ธโฃ ุงูููุฌูุฏุงุช</h3>
<div id="assets"></div>
<button onclick="addAsset()">โ ุฅุถุงูุฉ</button>
</div>

<!-- 9 -->
<div class="section">
<h3>9๏ธโฃ ุงุณู ุงูุจุงุญุซ</h3>
<input id="researcher" placeholder="ุงุณู ุงูุจุงุญุซ">
</div>

<div style="text-align:center">
<button onclick="window.print()">๐จ๏ธ ุทุจุงุนุฉ PDF</button>
<button onclick="clearAll()">๐๏ธ ูุดู ุฌุฏูุฏ</button>
</div>

</div>

<script>
/* ุญูุธ ุนุงู */
const inputs=document.querySelectorAll("input,select,textarea");
inputs.forEach(i=>{
  i.value=localStorage[i.id]||"";
  i.oninput=()=>localStorage[i.id]=i.value;
});

/* ุฎุฑุงุฆุท */
function openMap(lat,lng){
 if(!lat||!lng)return alert("ุฃุฏุฎู ุงูุฅุญุฏุงุซูุงุช");
 window.open(`https://maps.google.com?q=${lat},${lng}`);
}
function locate(latId,lngId){
 navigator.geolocation.getCurrentPosition(p=>{
  document.getElementById(latId).value=p.coords.latitude.toFixed(6);
  document.getElementById(lngId).value=p.coords.longitude.toFixed(6);
  localStorage[latId]=document.getElementById(latId).value;
  localStorage[lngId]=document.getElementById(lngId).value;
 });
}

/* 4 ุฒูุงูุง */
let angles=JSON.parse(localStorage.angles||"[]");
function addAngle(){
 angles.push({lat:"",lng:""});
 saveAngles();
}
function saveAngles(){
 localStorage.angles=JSON.stringify(angles);
 renderAngles();
}
function renderAngles(){
 let d=document.getElementById("angles"); d.innerHTML="";
 angles.forEach((a,i)=>{
  d.innerHTML+=`
  <input placeholder="Lat" value="${a.lat}" oninput="angles[${i}].lat=this.value;saveAngles()">
  <input placeholder="Lng" value="${a.lng}" oninput="angles[${i}].lng=this.value;saveAngles()">
  <button onclick="angles.splice(${i},1);saveAngles()">โ</button>`;
 });
}
renderAngles();

/* 5 ุงูุขุจุงุฑ */
let wells=JSON.parse(localStorage.wells||"[]");
function addWell(){wells.push({lat:"",lng:""});saveWells();}
function saveWells(){localStorage.wells=JSON.stringify(wells);renderWells();}
function renderWells(){
 let d=document.getElementById("wells"); d.innerHTML="";
 wells.forEach((w,i)=>{
  d.innerHTML+=`
  <input placeholder="Lat" value="${w.lat}" oninput="wells[${i}].lat=this.value;saveWells()">
  <input placeholder="Lng" value="${w.lng}" oninput="wells[${i}].lng=this.value;saveWells()">
  <button onclick="locateWell(${i})">๐</button>
  <button onclick="openMap('${w.lat}','${w.lng}')">๐บ๏ธ</button>
  <button onclick="wells.splice(${i},1);saveWells()">โ</button>`;
 });
}
function locateWell(i){
 navigator.geolocation.getCurrentPosition(p=>{
  wells[i].lat=p.coords.latitude.toFixed(6);
  wells[i].lng=p.coords.longitude.toFixed(6);
  saveWells();
 });
}
renderWells();

/* 6 ุงูุฑู */
crop.onchange=()=>cropOther.style.display=crop.value=="other"?"block":"none";
function calcIrr(){
 let t=+towers.value||0,l=+towerLen.value||0;
 let total=t*l;
 irrigResult.innerText=`ุฅุฌูุงูู ุงูุทูู ${total} ู`;
}
towers.oninput=calcIrr; towerLen.oninput=calcIrr;

/* 7 ุงููุฒุฑูุนุงุช */
let plants=JSON.parse(localStorage.plants||"[]");
function addPlant(){plants.push({type:"",count:""});savePlants();}
function savePlants(){localStorage.plants=JSON.stringify(plants);renderPlants();}
function renderPlants(){
 let d=document.getElementById("plants"); d.innerHTML="";
 plants.forEach((p,i)=>{
  d.innerHTML+=`
  <select onchange="plants[${i}].type=this.value;savePlants()">
   <option>ูุฎูู</option><option>ูุตุฏุงุช ุฑูุงุญ</option><option>ุญูุถูุงุช</option>
  </select>
  <input placeholder="ุนุฏุฏ ุงูุดุชูุงุช" value="${p.count}" 
   oninput="plants[${i}].count=this.value;savePlants()">
  <button onclick="plants.splice(${i},1);savePlants()">โ</button>`;
 });
}
renderPlants();

/* 8 ุงูููุฌูุฏุงุช */
let assets=JSON.parse(localStorage.assets||"[]");
function addAsset(){assets.push({type:"",note:""});saveAssets();}
function saveAssets(){localStorage.assets=JSON.stringify(assets);renderAssets();}
function renderAssets(){
 let d=document.getElementById("assets"); d.innerHTML="";
 assets.forEach((a,i)=>{
  d.innerHTML+=`
  <input placeholder="ุงูููุน" value="${a.type}"
   oninput="assets[${i}].type=this.value;saveAssets()">
  <input placeholder="ููุงุญุธุงุช" value="${a.note}"
   oninput="assets[${i}].note=this.value;saveAssets()">
  <button onclick="assets.splice(${i},1);saveAssets()">โ</button>`;
 });
}
renderAssets();

/* ูุณุญ */
function clearAll(){
 if(confirm("ุจุฏุก ูุดู ุฌุฏูุฏุ")){
  localStorage.clear();
  location.reload();
 }
}
</script>

</body>
</html>