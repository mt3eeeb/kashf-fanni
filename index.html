<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>ูุดู ููู</title>
<style>
body{
  font-family: Arial;
  direction: rtl;
  background:#f5f7fa;
  margin:20px;
}
h1,h2{text-align:center;margin:4px}
.section{
  background:#fff;
  border-radius:8px;
  padding:12px;
  margin-bottom:14px;
  box-shadow:0 0 5px #ccc;
}
.row{display:flex;gap:8px;flex-wrap:wrap}
input,select,button,textarea{
  padding:6px;
  border-radius:4px;
  border:1px solid #ccc;
}
button{cursor:pointer}
.small{width:120px}
.wide{width:220px}
</style>
</head>

<body>

<h1>ููุชุจ ุตูุฏูู ุงูุชูููุฉ ุงูุฒุฑุงุนูุฉ ุจูุญุงูุธุฉ ูุฑูุฉ ุงูุนููุง</h1>
<h2>ูุดู ููู</h2>

<!-- ========== ุจูุฏ 1: ุงูุจูุงูุงุช ุงูุนุงูุฉ ========== -->
<div class="section">
<h3>1๏ธโฃ ุงูุจูุงูุงุช ุงูุนุงูุฉ</h3>
<div class="row">
<input class="wide" placeholder="ุงุณู ุงูุนููู" oninput="saveField(this,'client')">
<input class="small" placeholder="ุฑูู ุงูุทูุจ" oninput="saveField(this,'order')">
<input type="date" oninput="saveField(this,'date')">
</div>
</div>

<!-- ========== ุจูุฏ 2: ุฅุญุฏุงุซูุงุช ุงูุณุฌู ========== -->
<div class="section">
<h3>2๏ธโฃ ุฅุญุฏุงุซูุงุช ุงูุณุฌู</h3>
<input id="regLat" placeholder="Latitude">
<input id="regLng" placeholder="Longitude">
<button onclick="openMap('regLat','regLng')">๐บ๏ธ</button>
</div>

<!-- ========== ุจูุฏ 3: ุฅุญุฏุงุซูุงุช ุงูุจูุงุจุฉ ========== -->
<div class="section">
<h3>3๏ธโฃ ุฅุญุฏุงุซูุงุช ุงูุจูุงุจุฉ</h3>
<input id="gateLat" placeholder="Latitude">
<input id="gateLng" placeholder="Longitude">
<button onclick="locate('gateLat','gateLng')">๐</button>
<button onclick="openMap('gateLat','gateLng')">๐บ๏ธ</button>
</div>

<!-- ========== ุจูุฏ 4: ุฒูุงูุง ุงููุฒุฑุนุฉ ========== -->
<div class="section">
<h3>4๏ธโฃ ุฒูุงูุง ุงููุฒุฑุนุฉ</h3>
<div id="corners"></div>
<button onclick="addCorner()">โ ุฅุถุงูุฉ ุฒุงููุฉ</button>
<p id="areaResult"></p>
</div>

<!-- ========== ุจูุฏ 5: ุงูุขุจุงุฑ ========== -->
<div class="section">
<h3>5๏ธโฃ ุงูุขุจุงุฑ</h3>
<div id="wells"></div>
<button onclick="addWell()">โ ุฅุถุงูุฉ ุจุฆุฑ</button>
</div>

<!-- ========== ุจูุฏ 6: ูุธุงู ุงูุฑู ========== -->
<div class="section">
<h3>6๏ธโฃ ูุธุงู ุงูุฑู</h3>
ุนุฏุฏ ุงูุฃุจุฑุงุฌ <input id="towers" type="number">
ุทูู ุงูุจุฑุฌ <input id="towerLen" type="number">
<select id="crop">
<option>ููุญ</option>
<option>ุฃุนูุงู ุฎุถุฑู</option>
<option>ุขุฎุฑ</option>
</select>
<input id="cropOther" placeholder="ููุน ุขุฎุฑ" style="display:none">
<p id="irrigArea"></p>
</div>

<!-- ========== ุจูุฏ 7: ุงููุฒุฑูุนุงุช ========== -->
<div class="section">
<h3>7๏ธโฃ ุงููุฒุฑูุนุงุช</h3>
<div id="plants"></div>
<button onclick="addPlant()">โ ุฅุถุงูุฉ</button>
</div>

<!-- ========== ุจูุฏ 8: ุงูููุฌูุฏุงุช ========== -->
<div class="section">
<h3>8๏ธโฃ ุงูููุฌูุฏุงุช</h3>
<div id="assets"></div>
<button onclick="addAsset()">โ ุฅุถุงูุฉ</button>
</div>

<!-- ========== ุจูุฏ 9: ุงูุจุงุญุซ ========== -->
<div class="section">
<h3>9๏ธโฃ ุงุณู ุงูุจุงุญุซ</h3>
<input placeholder="ุงุณู ุงูุจุงุญุซ" oninput="saveField(this,'researcher')">
</div>

<button onclick="window.print()">๐จ๏ธ ุทุจุงุนุฉ PDF</button>

<script>
/* ===== ุญูุธ ุนุงู ===== */
function saveField(el,key){localStorage.setItem(key,el.value)}
document.querySelectorAll("input").forEach(i=>{
  if(localStorage.getItem(i.placeholder))
    i.value=localStorage.getItem(i.placeholder)
})

/* ===== ุฎุฑุงุฆุท ===== */
function openMap(lat,lng){
  const la=document.getElementById(lat).value;
  const ln=document.getElementById(lng).value;
  if(!la||!ln)return alert("ุฃุฏุฎู ุงูุฅุญุฏุงุซูุงุช");
  window.open(`https://www.google.com/maps?q=${la},${ln}`)
}
function locate(lat,lng){
 navigator.geolocation.getCurrentPosition(p=>{
  document.getElementById(lat).value=p.coords.latitude.toFixed(6)
  document.getElementById(lng).value=p.coords.longitude.toFixed(6)
 })
}

/* ===== ุจูุฏ 4 ===== */
let corners=JSON.parse(localStorage.getItem("corners")||"[]");
function addCorner(){
 corners.push({lat:"",lng:""}); saveCorners(); drawCorners()
}
function saveCorners(){localStorage.setItem("corners",JSON.stringify(corners))}
function drawCorners(){
 const c=document.getElementById("corners"); c.innerHTML=""
 corners.forEach((o,i)=>{
  c.innerHTML+=`
   <input placeholder="Lat" oninput="corners[${i}].lat=this.value;saveCorners()">
   <input placeholder="Lng" oninput="corners[${i}].lng=this.value;saveCorners()">
   <button onclick="corners.splice(${i},1);saveCorners();drawCorners()">โ</button><br>`
 })
}
drawCorners()

/* ===== ุจูุฏ 5 ===== */
let wells=JSON.parse(localStorage.getItem("wells")||"[]");
function addWell(){wells.push({lat:"",lng:""});saveWells();drawWells()}
function saveWells(){localStorage.setItem("wells",JSON.stringify(wells))}
function drawWells(){
 const w=document.getElementById("wells"); w.innerHTML=""
 wells.forEach((o,i)=>{
  w.innerHTML+=`
   <input placeholder="Lat" oninput="wells[${i}].lat=this.value;saveWells()">
   <input placeholder="Lng" oninput="wells[${i}].lng=this.value;saveWells()">
   <button onclick="openMapVal(${i})">๐บ๏ธ</button>
   <button onclick="locWell(${i})">๐</button>
   <button onclick="wells.splice(${i},1);saveWells();drawWells()">โ</button><br>`
 })
}
function openMapVal(i){
 open(`https://www.google.com/maps?q=${wells[i].lat},${wells[i].lng}`)
}
function locWell(i){
 navigator.geolocation.getCurrentPosition(p=>{
  wells[i].lat=p.coords.latitude.toFixed(6)
  wells[i].lng=p.coords.longitude.toFixed(6)
  saveWells(); drawWells()
 })
}
drawWells()

/* ===== ุจูุฏ 6 ===== */
document.getElementById("crop").onchange=e=>{
 document.getElementById("cropOther").style.display=
 e.target.value==="ุขุฎุฑ"?"inline":"none"
}
document.getElementById("towerLen").oninput=calcIrr
document.getElementById("towers").oninput=calcIrr
function calcIrr(){
 const t=+towers.value,l=+towerLen.value
 const m=t*l
 irrigArea.innerText=
 `ุงููุณุงุญุฉ: ${m} ูยฒ | ${(m/10000).toFixed(2)} ููุชุงุฑ | ${(m/1000).toFixed(2)} ุฏููู`
}

/* ===== ุจูุฏ 7 ===== */
let plants=JSON.parse(localStorage.getItem("plants")||"[]");
function addPlant(){plants.push({});savePlants();drawPlants()}
function savePlants(){localStorage.setItem("plants",JSON.stringify(plants))}
function drawPlants(){
 const p=document.getElementById("plants"); p.innerHTML=""
 plants.forEach((o,i)=>{
  p.innerHTML+=`
   <select onchange="plants[${i}].type=this.value;savePlants()">
    <option>ูุฎูู</option><option>ูุตุฏุงุช ุฑูุงุญ</option><option>ุญูุถูุงุช</option><option>ุขุฎุฑ</option>
   </select>
   <input placeholder="ุนุฏุฏ ุงูุดุชูุงุช" oninput="plants[${i}].n=this.value;savePlants()">
   <button onclick="plants.splice(${i},1);savePlants();drawPlants()">โ</button><br>`
 })
}
drawPlants()

/* ===== ุจูุฏ 8 ===== */
let assets=JSON.parse(localStorage.getItem("assets")||"[]");
function addAsset(){assets.push({});saveAssets();drawAssets()}
function saveAssets(){localStorage.setItem("assets",JSON.stringify(assets))}
function drawAssets(){
 const a=document.getElementById("assets"); a.innerHTML=""
 assets.forEach((o,i)=>{
  a.innerHTML+=`
   <select onchange="assets[${i}].t=this.value;saveAssets()">
    <option>ูุจุงูู</option><option>ุฎุฒุงูุงุช</option><option>ูููุฏุงุช</option><option>ุฃุฎุฑู</option>
   </select>
   <input placeholder="ุงูุนุฏุฏ" oninput="assets[${i}].n=this.value;saveAssets()">
   <input placeholder="ููุงุญุธุงุช" oninput="assets[${i}].m=this.value;saveAssets()">
   <button onclick="assets.splice(${i},1);saveAssets();drawAssets()">โ</button><br>`
 })
}
drawAssets()
</script>

</body>
</html>