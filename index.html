<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>ูุดู ููู</title>

<style>
body{
  direction:rtl;
  font-family:Tahoma, Arial;
  background:#f2f4f7;
  margin:20px;
}
h1,h2{text-align:center;margin:6px 0}
.section{
  background:#fff;
  padding:12px;
  margin-bottom:15px;
  border-radius:8px;
  box-shadow:0 0 6px #ccc;
}
.row{display:flex;flex-wrap:wrap;gap:8px}
input,select,textarea,button{
  padding:6px;
  border-radius:4px;
  border:1px solid #aaa;
}
button{cursor:pointer}
textarea{width:100%}
.small{width:120px}
.medium{width:180px}
</style>
</head>

<body>

<h1>ููุชุจ ุตูุฏูู ุงูุชูููุฉ ุงูุฒุฑุงุนูุฉ ุจูุญุงูุธุฉ ูุฑูุฉ ุงูุนููุง</h1>
<h2>ูุดู ููู</h2>

<!-- ================== 1 ุงูุจูุงูุงุช ุงูุนุงูุฉ ================== -->
<div class="section">
<h3>1๏ธโฃ ุงูุจูุงูุงุช ุงูุนุงูุฉ</h3>
<div class="row">
<input class="medium" placeholder="ุงุณู ุงูุนููู" data-key="client">
<input class="small" placeholder="ุฑูู ุงูุทูุจ" data-key="order">
<input type="date" data-key="date">
</div>
</div>

<!-- ================== 2 ุงูุณุฌู ================== -->
<div class="section">
<h3>2๏ธโฃ ุฅุญุฏุงุซูุงุช ุงูุณุฌู</h3>
<input placeholder="Latitude" id="regLat">
<input placeholder="Longitude" id="regLng">
<button onclick="openMap('regLat','regLng')">๐บ๏ธ</button>
</div>

<!-- ================== 3 ุงูุจูุงุจุฉ ================== -->
<div class="section">
<h3>3๏ธโฃ ุฅุญุฏุงุซูุงุช ุงูุจูุงุจุฉ</h3>
<input placeholder="Latitude" id="gateLat">
<input placeholder="Longitude" id="gateLng">
<button onclick="locate('gateLat','gateLng')">๐</button>
<button onclick="openMap('gateLat','gateLng')">๐บ๏ธ</button>
</div>

<!-- ================== 4 ุฒูุงูุง ุงููุฒุฑุนุฉ ================== -->
<div class="section">
<h3>4๏ธโฃ ุฒูุงูุง ุงููุฒุฑุนุฉ</h3>
<div id="corners"></div>
<button onclick="addCorner()">โ ุฅุถุงูุฉ ุฒุงููุฉ</button>
</div>

<!-- ================== 5 ุงูุขุจุงุฑ ================== -->
<div class="section">
<h3>5๏ธโฃ ุงูุขุจุงุฑ</h3>
<div id="wells"></div>
<button onclick="addWell()">โ ุฅุถุงูุฉ ุจุฆุฑ</button>
</div>

<!-- ================== 6 ูุธุงู ุงูุฑู ================== -->
<div class="section">
<h3>6๏ธโฃ ูุธุงู ุงูุฑู</h3>
ุนุฏุฏ ุงูุฃุจุฑุงุฌ <input id="towers">
ุทูู ุงูุจุฑุฌ <input id="towerLen">
<select id="crop">
  <option>ููุญ</option>
  <option>ุฃุนูุงู ุฎุถุฑู</option>
  <option>ุขุฎุฑ</option>
</select>
<input id="cropOther" placeholder="ููุน ุขุฎุฑ" style="display:none">
<p id="irrigResult"></p>
</div>

<!-- ================== 7 ุงููุฒุฑูุนุงุช ================== -->
<div class="section">
<h3>7๏ธโฃ ุงููุฒุฑูุนุงุช</h3>
<div id="plants"></div>
<button onclick="addPlant()">โ ุฅุถุงูุฉ</button>
</div>

<!-- ================== 8 ุงูููุฌูุฏุงุช ================== -->
<div class="section">
<h3>8๏ธโฃ ุงูููุฌูุฏุงุช</h3>
<div id="assets"></div>
<button onclick="addAsset()">โ ุฅุถุงูุฉ</button>
</div>

<!-- ================== 9 ุงูุจุงุญุซ ================== -->
<div class="section">
<h3>9๏ธโฃ ุงุณู ุงูุจุงุญุซ</h3>
<input placeholder="ุงุณู ุงูุจุงุญุซ" data-key="researcher">
</div>

<button onclick="window.print()">๐จ๏ธ ุทุจุงุนุฉ PDF</button>

<script>
/* ===== ุญูุธ ุนุงู ===== */
document.querySelectorAll("[data-key]").forEach(el=>{
  el.value=localStorage.getItem(el.dataset.key)||""
  el.oninput=()=>localStorage.setItem(el.dataset.key,el.value)
})

/* ===== ุฎุฑุงุฆุท ===== */
function openMap(a,b){
 const la=document.getElementById(a).value
 const ln=document.getElementById(b).value
 if(!la||!ln)return alert("ุฃุฏุฎู ุงูุฅุญุฏุงุซูุงุช")
 open(`https://www.google.com/maps?q=${la},${ln}`)
}
function locate(a,b){
 navigator.geolocation.getCurrentPosition(p=>{
  document.getElementById(a).value=p.coords.latitude.toFixed(6)
  document.getElementById(b).value=p.coords.longitude.toFixed(6)
 })
}

/* ===== ุจูุฏ 4 ===== */
let corners=JSON.parse(localStorage.getItem("corners")||"[]")
function addCorner(){corners.push({});saveC();drawC()}
function saveC(){localStorage.setItem("corners",JSON.stringify(corners))}
function drawC(){
 const c=document.getElementById("corners"); c.innerHTML=""
 corners.forEach((o,i)=>{
  c.innerHTML+=`
   <input placeholder="Lat" oninput="corners[${i}].lat=this.value;saveC()">
   <input placeholder="Lng" oninput="corners[${i}].lng=this.value;saveC()">
   <button onclick="corners.splice(${i},1);saveC();drawC()">โ</button><br>`
 })
}
drawC()

/* ===== ุจูุฏ 5 ===== */
let wells=JSON.parse(localStorage.getItem("wells")||"[]")
function addWell(){wells.push({});saveW();drawW()}
function saveW(){localStorage.setItem("wells",JSON.stringify(wells))}
function drawW(){
 const w=document.getElementById("wells"); w.innerHTML=""
 wells.forEach((o,i)=>{
  w.innerHTML+=`
   <input placeholder="Lat" oninput="wells[${i}].lat=this.value;saveW()">
   <input placeholder="Lng" oninput="wells[${i}].lng=this.value;saveW()">
   <button onclick="open(\`https://maps.google.com?q=\${wells[i].lat},\${wells[i].lng}\`)">๐บ๏ธ</button>
   <button onclick="navigator.geolocation.getCurrentPosition(p=>{wells[${i}].lat=p.coords.latitude.toFixed(6);wells[${i}].lng=p.coords.longitude.toFixed(6);saveW();drawW()})">๐</button>
   <button onclick="wells.splice(${i},1);saveW();drawW()">โ</button><br>`
 })
}
drawW()

/* ===== ุจูุฏ 6 ===== */
crop.onchange=()=>cropOther.style.display=crop.value==="ุขุฎุฑ"?"inline":"none"
function calcIrr(){
 const t=+towers.value||0,l=+towerLen.value||0
 const m=t*l
 irrigResult.innerText=
 `ุงููุณุงุญุฉ: ${m} ูยฒ | ${(m/10000).toFixed(2)} ููุชุงุฑ | ${(m/1000).toFixed(2)} ุฏููู`
}
towers.oninput=towerLen.oninput=calcIrr

/* ===== ุจูุฏ 7 ===== */
let plants=JSON.parse(localStorage.getItem("plants")||"[]")
function addPlant(){plants.push({});saveP();drawP()}
function saveP(){localStorage.setItem("plants",JSON.stringify(plants))}
function drawP(){
 const p=document.getElementById("plants"); p.innerHTML=""
 plants.forEach((o,i)=>{
  p.innerHTML+=`
   <select onchange="plants[${i}].t=this.value;saveP()">
    <option>ูุฎูู</option><option>ูุตุฏุงุช ุฑูุงุญ</option><option>ุญูุถูุงุช</option><option>ุขุฎุฑ</option>
   </select>
   <input placeholder="ุนุฏุฏ ุงูุดุชูุงุช" oninput="plants[${i}].n=this.value;saveP()">
   <button onclick="plants.splice(${i},1);saveP();drawP()">โ</button><br>`
 })
}
drawP()

/* ===== ุจูุฏ 8 ===== */
let assets=JSON.parse(localStorage.getItem("assets")||"[]")
function addAsset(){assets.push({});saveA();drawA()}
function saveA(){localStorage.setItem("assets",JSON.stringify(assets))}
function drawA(){
 const a=document.getElementById("assets"); a.innerHTML=""
 assets.forEach((o,i)=>{
  a.innerHTML+=`
   <select onchange="assets[${i}].t=this.value;saveA()">
    <option>ูุจุงูู</option><option>ุฎุฒุงูุงุช</option><option>ูููุฏุงุช</option><option>ุฃุฎุฑู</option>
   </select>
   <input placeholder="ุงูุนุฏุฏ" oninput="assets[${i}].n=this.value;saveA()">
   <input placeholder="ููุงุญุธุงุช" oninput="assets[${i}].m=this.value;saveA()">
   <button onclick="assets.splice(${i},1);saveA();drawA()">โ</button><br>`
 })
}
drawA()
</script>

</body>
</html>