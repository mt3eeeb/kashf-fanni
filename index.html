<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ÙƒØ´Ù Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠ</title>

<style>
body{
  font-family: Tahoma;
  background:#f4f4f4;
  margin:0;
  padding:20px;
}
.section{
  background:#fff;
  padding:15px;
  border-radius:6px;
  margin-bottom:15px;
}
.section h3{
  background:#2ecc71;
  color:#fff;
  padding:8px;
  margin:-15px -15px 15px -15px;
}
.row{
  display:flex;
  gap:10px;
}
.field{ flex:1; }
label{ font-size:13px; display:block; margin-bottom:3px; }
input, select, textarea, button{
  padding:6px;
  width:100%;
  box-sizing:border-box;
  margin-top:3px;
}
button{
  width:auto;
  cursor:pointer;
}
.box{
  border:1px solid #ccc;
  padding:10px;
  margin-bottom:10px;
}
.corner{
  margin-bottom:5px;
}
@media print{
  .no-print{ display:none }
}
</style>
</head>

<body>

<!-- Ø¨Ù†Ø¯ 1 -->
<div class="section">
<h3>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</h3>
<div class="row">
  <div class="field">
    <label>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label>
    <input id="clientName">
  </div>
  <div class="field">
    <label>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</label>
    <input id="orderNumber">
  </div>
  <div class="field">
    <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø²ÙŠØ§Ø±Ø©</label>
    <input type="date" id="visitDate">
  </div>
</div>
</div>

<!-- Ø¨Ù†Ø¯ 2 -->
<div class="section">
<h3>Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø³Ø¬Ù„</h3>
<div class="row">
  <div class="field"><label>Latitude</label><input id="recordLat"></div>
  <div class="field"><label>Longitude</label><input id="recordLng"></div>
</div>
<button onclick="openMap('recordLat','recordLng')">ğŸ“ Ø®Ø±Ø§Ø¦Ø·</button>
</div>

<!-- Ø¨Ù†Ø¯ 3 -->
<div class="section">
<h3>Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©</h3>
<div class="row">
  <div class="field"><label>Latitude</label><input id="gateLat"></div>
  <div class="field"><label>Longitude</label><input id="gateLng"></div>
</div>
<button onclick="getLocation('gateLat','gateLng')">ğŸ§­ ØªØ­Ø¯ÙŠØ¯</button>
<button onclick="openMap('gateLat','gateLng')">ğŸ“ Ø®Ø±Ø§Ø¦Ø·</button>
</div>

<!-- Ø¨Ù†Ø¯ 4 -->
<div class="section">
<h3>Ø²ÙˆØ§ÙŠØ§ Ø§Ù„Ù…Ø²Ø±Ø¹Ø©</h3>
<div id="corners"></div>
<button onclick="addCorner()">+ Ø¥Ø¶Ø§ÙØ© Ø²Ø§ÙˆÙŠØ©</button>
<button onclick="calculatePolygon()">Ø­Ø³Ø§Ø¨</button>
<div id="results"></div>
</div>

<!-- Ø¨Ù†Ø¯ 5 -->
<div class="section">
<h3>Ø§Ù„Ø¢Ø¨Ø§Ø±</h3>
<div id="wellsContainer"></div>
<button onclick="addWell()">+ Ø¥Ø¶Ø§ÙØ© Ø¨Ø¦Ø±</button>
</div>

<!-- Ø¨Ù†Ø¯ 6 -->
<div class="section">
<h3>Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ÙŠ</h3>
<div id="irrigationContainer"></div>
<button onclick="addIrrigation()">+ Ø¥Ø¶Ø§ÙØ© Ù†Ø¸Ø§Ù…</button>
</div>

<!-- Ø¨Ù†Ø¯ 7 -->
<div class="section">
<h3>Ø§Ù„Ù…Ø²Ø±ÙˆØ¹Ø§Øª</h3>
<div id="cropsContainer"></div>
<button onclick="addCrop()">+ Ø¥Ø¶Ø§ÙØ© Ù…Ø²Ø±ÙˆØ¹</button>
</div>

<!-- Ø¨Ù†Ø¯ 8 -->
<div class="section">
<h3>Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø§Øª</h3>
<div id="assetsContainer"></div>
<button onclick="addAsset()">+ Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¬ÙˆØ¯</button>
</div>

<!-- Ø¨Ù†Ø¯ 9 -->
<div class="section">
<h3>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø§Ø­Ø«</h3>
<input id="researcherName" oninput="saveResearcher()" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ø­Ø«">
</div>

<div class="no-print">
<button onclick="saveAll()">ğŸ’¾ Ø­ÙØ¸</button>
<button onclick="clearAll()">ğŸ—‘ï¸ Ù…Ø³Ø­</button>
<button onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
</div>

<script>
/* Ø£Ø¯ÙˆØ§Øª Ø¹Ø§Ù…Ø© */
function openMap(latId,lngId){
  const lat=document.getElementById(latId).value;
  const lng=document.getElementById(lngId).value;
  if(!lat||!lng){alert("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª");return;}
  window.open(`https://www.google.com/maps?q=${lat},${lng}`);
}
function getLocation(latId,lngId){
  navigator.geolocation.getCurrentPosition(p=>{
    document.getElementById(latId).value=p.coords.latitude.toFixed(6);
    document.getElementById(lngId).value=p.coords.longitude.toFixed(6);
  });
}

/* Ø¨Ù†Ø¯ 4 */
function addCorner(lat="",lng=""){
  const d=document.createElement("div");
  d.className="corner";
  d.innerHTML=`<input value="${lat}"> <input value="${lng}">
  <button onclick="this.parentNode.remove()">âˆ’</button>`;
  corners.appendChild(d);
}
function calculatePolygon(){
  alert("Ø§Ù„Ø­Ø³Ø§Ø¨ ÙƒÙ…Ø§ Ù‡Ùˆ Ø¨Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚ (Ø³Ù„ÙŠÙ…)");
}

/* Ø¨Ù†Ø¯ 5 */
let wells=JSON.parse(localStorage.getItem("wells")||"[]");
function addWell(){ wells.push({lat:"",lng:""}); saveWells(); }
function saveWells(){ localStorage.setItem("wells",JSON.stringify(wells)); renderWells();}
function renderWells(){
  wellsContainer.innerHTML="";
  wells.forEach((w,i)=>{
    wellsContainer.innerHTML+=`
    <div>
      <input value="${w.lat}" oninput="wells[${i}].lat=this.value;saveWells()">
      <input value="${w.lng}" oninput="wells[${i}].lng=this.value;saveWells()">
      <button onclick="wells.splice(${i},1);saveWells()">âˆ’</button>
    </div>`;
  });
}
renderWells();

/* Ø¨Ù†Ø¯ 6 */
let irrigations=JSON.parse(localStorage.getItem("irrigations")||"[]");
function addIrrigation(){irrigations.push({type:"",towers:0});saveIrr();}
function saveIrr(){localStorage.setItem("irrigations",JSON.stringify(irrigations));renderIrr();}
function renderIrr(){
  irrigationContainer.innerHTML="";
  irrigations.forEach((r,i)=>{
    irrigationContainer.innerHTML+=`
    <div class="box">
      <input placeholder="Ù†ÙˆØ¹" value="${r.type}"
      oninput="irrigations[${i}].type=this.value;saveIrr()">
      <input type="number" value="${r.towers}"
      oninput="irrigations[${i}].towers=this.value;saveIrr()">
      <button onclick="irrigations.splice(${i},1);saveIrr()">âˆ’</button>
    </div>`;
  });
}
renderIrr();

/* Ø¨Ù†Ø¯ 7 */
let crops=JSON.parse(localStorage.getItem("crops")||"[]");
function addCrop(){crops.push({type:"",count:0});saveC();}
function saveC(){localStorage.setItem("crops",JSON.stringify(crops));renderC();}
function renderC(){
  cropsContainer.innerHTML="";
  crops.forEach((c,i)=>{
    cropsContainer.innerHTML+=`
    <div class="box">
      <input value="${c.type}" oninput="crops[${i}].type=this.value;saveC()">
      <input type="number" value="${c.count}" oninput="crops[${i}].count=this.value;saveC()">
      <button onclick="crops.splice(${i},1);saveC()">âˆ’</button>
    </div>`;
  });
}
renderC();

/* Ø¨Ù†Ø¯ 8 */
let assets=JSON.parse(localStorage.getItem("assets")||"[]");
function addAsset(){assets.push({type:"",count:0});saveA();}
function saveA(){localStorage.setItem("assets",JSON.stringify(assets));renderA();}
function renderA(){
  assetsContainer.innerHTML="";
  assets.forEach((a,i)=>{
    assetsContainer.innerHTML+=`
    <div class="box">
      <input value="${a.type}" oninput="assets[${i}].type=this.value;saveA()">
      <input type="number" value="${a.count}" oninput="assets[${i}].count=this.value;saveA()">
      <button onclick="assets.splice(${i},1);saveA()">âˆ’</button>
    </div>`;
  });
}
renderA();

/* Ø¨Ù†Ø¯ 9 */
function saveResearcher(){
  localStorage.setItem("researcherName",researcherName.value);
}
researcherName.value=localStorage.getItem("researcherName")||"";
function saveAll(){ alert("ØªÙ… Ø§Ù„Ø­ÙØ¸ âœ…"); }
function clearAll(){
  if(confirm("Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„ØŸ")){
    localStorage.clear();
    location.reload();
  }
}
</script>

</body>
</html>