<script>
let wells = JSON.parse(localStorage.getItem("wells")) || [];

function saveWells() {
  localStorage.setItem("wells", JSON.stringify(wells));
}

function addWell(lat = "", lng = "") {
  wells.push({ lat, lng });
  saveWells();
  renderWells();
}

function removeWell(index) {
  wells.splice(index, 1);
  saveWells();
  renderWells();
}

function updateWell(index, field, value) {
  wells[index][field] = value;
  saveWells();
}

function locateWell(index) {
  if (!navigator.geolocation) {
    alert("ุงููุชุตูุญ ูุง ูุฏุนู ุชุญุฏูุฏ ุงููููุน");
    return;
  }
  navigator.geolocation.getCurrentPosition(pos => {
    wells[index].lat = pos.coords.latitude.toFixed(6);
    wells[index].lng = pos.coords.longitude.toFixed(6);
    saveWells();
    renderWells();
  });
}

function openWellMap(index) {
  const w = wells[index];
  if (!w.lat || !w.lng) {
    alert("ุฃุฏุฎู ุงูุฅุญุฏุงุซูุงุช ุฃููุงู");
    return;
  }
  window.open(
    `https://www.google.com/maps?q=${w.lat},${w.lng}`,
    "_blank"
  );
}

function renderWells() {
  const container = document.getElementById("wells");
  container.innerHTML = "";

  wells.forEach((w, i) => {
    container.innerHTML += `
      <div style="margin-bottom:10px">
        <input type="number" step="any" placeholder="Latitude"
          value="${w.lat}"
          onchange="updateWell(${i}, 'lat', this.value)">

        <input type="number" step="any" placeholder="Longitude"
          value="${w.lng}"
          onchange="updateWell(${i}, 'lng', this.value)">

        <button onclick="locateWell(${i})">๐</button>
        <button onclick="openWellMap(${i})">๐บ</button>
        <button onclick="removeWell(${i})">โ</button>
      </div>
    `;
  });
}

// ุชุญููู ุงูุขุจุงุฑ ุงููุญููุธุฉ ุนูุฏ ูุชุญ ุงูุตูุญุฉ
renderWells();
</script>