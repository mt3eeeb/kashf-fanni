<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ÙƒØ´Ù ÙÙ†ÙŠ Ø²Ø±Ø§Ø¹ÙŠ</title>

<style>
body{
  font-family: Tahoma, Arial;
  background:#f4f4f4;
  margin:0;
}
.container{
  max-width:900px;
  margin:auto;
  background:#fff;
  padding:12px;
}
.header{
  text-align:center;
  margin-bottom:15px;
}
.header small{display:block;font-size:13px;}
.section{margin-bottom:15px;}
.section h3{
  background:#2ecc71;
  color:#fff;
  padding:7px;
  margin:0 0 8px;
  font-size:15px;
}
.row{display:flex;gap:5px;margin-bottom:5px;}
input,select{
  flex:1;
  padding:6px;
  font-size:14px;
}
button{
  padding:7px;
  border:none;
  cursor:pointer;
}
.add{background:#2ecc71;color:#fff;}
.del{background:#e74c3c;color:#fff;}
.gray{background:#ddd;}
.small-btn{width:100%;}
.center{text-align:center;}
.result{
  background:#eee;
  padding:8px;
  font-size:14px;
}

@media print{
  button{display:none;}
  .page-break{page-break-before:always;}
}
</style>
</head>

<body>
<div class="container">

<!-- ===== Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ===== -->
<div class="header">
  <small>Ù…ÙƒØªØ¨ Ù…Ø­Ø§ÙØ¸Ø© Ù‚Ø±ÙŠØ© Ø§Ù„Ø¹Ù„ÙŠØ§</small>
  <h2>ÙƒØ´Ù ÙÙ†ÙŠ Ø²Ø±Ø§Ø¹ÙŠ</h2>
</div>

<!-- ===== Ø§Ù„ØµÙØ­Ø© 1 ===== -->

<div class="section">
<h3>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</h3>
<input placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ù„Ùƒ">
<input placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø²Ø±Ø¹Ø©">
<input placeholder="Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨">
<input type="date">
</div>

<div class="section">
<h3>Ø¥Ø­Ø¯Ø§Ø«ÙŠØ© Ø§Ù„Ø³Ø¬Ù„</h3>
<input id="recLat" placeholder="Latitude">
<input id="recLng" placeholder="Longitude">
<button class="gray small-btn" onclick="openMap('recLat','recLng')">ÙØªØ­ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</button>
</div>

<div class="section">
<h3>Ø¥Ø­Ø¯Ø§Ø«ÙŠØ© Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©</h3>
<input id="gateLat" placeholder="Latitude">
<input id="gateLng" placeholder="Longitude">
<button class="gray small-btn" onclick="getLocation('gateLat','gateLng')">ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹</button>
<button class="gray small-btn" onclick="openMap('gateLat','gateLng')">ÙØªØ­ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</button>
</div>

<div class="section">
<h3>Ø²ÙˆØ§ÙŠØ§ Ø§Ù„Ù…Ø²Ø±Ø¹Ø© (Ù„Ù„ÙØ­Øµ ÙÙ‚Ø·)</h3>
<div id="corners"></div>
<button class="add small-btn" onclick="addCorner()">+ Ø¥Ø¶Ø§ÙØ© Ø²Ø§ÙˆÙŠØ©</button>
<button class="gray small-btn" onclick="calcDistances()">ÙØ­Øµ Ø§Ù„Ù…Ø³Ø§ÙØ§Øª</button>
<div id="cornerResult" class="result"></div>
</div>

<div class="section">
<h3>Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø£Ø±Ø¶ (Ø­Ø³Ø¨ Ø§Ù„ÙƒØ±ÙˆÙƒÙŠ)</h3>
<input id="landArea" placeholder="Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø¨Ø§Ù„Ù…ØªØ± Ø§Ù„Ù…Ø±Ø¨Ø¹">
<div class="result" id="landResult"></div>
</div>

<div class="page-break"></div>

<!-- ===== Ø§Ù„ØµÙØ­Ø© 2 ===== -->

<div class="section">
<h3>Ø§Ù„Ø¢Ø¨Ø§Ø±</h3>
<div id="wells"></div>
<button class="add small-btn" onclick="addWell()">+ Ø¥Ø¶Ø§ÙØ© Ø¨Ø¦Ø±</button>
</div>

<div class="section">
<h3>Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ÙŠ</h3>
<div id="irrigation"></div>
<button class="add small-btn" onclick="addIrrigation()">+ Ø¥Ø¶Ø§ÙØ© Ù†Ø¸Ø§Ù… Ø±ÙŠ</button>
</div>

<div class="section">
<h3>Ø§Ù„Ù…Ø²Ø±ÙˆØ¹Ø§Øª</h3>
<div id="crops"></div>
<button class="add small-btn" onclick="addCrop()">+ Ø¥Ø¶Ø§ÙØ© Ù…Ø²Ø±ÙˆØ¹</button>
</div>

<div class="section">
<h3>Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø§Øª</h3>
<div id="assets"></div>
<button class="add small-btn" onclick="addAsset()">+ Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¬ÙˆØ¯</button>
</div>

<div class="section">
<h3>Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ø­Ø«</h3>
<input placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ø­Ø«">
</div>

<div class="section center">
<button class="gray" onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© PDF</button>
</div>

</div>

<script>
/* ===== Ø£Ø¯ÙˆØ§Øª Ø¹Ø§Ù…Ø© ===== */
function openMap(latId,lngId){
  let lat=document.getElementById(latId).value;
  let lng=document.getElementById(lngId).value;
  if(lat && lng){
    window.open(`https://www.google.com/maps?q=${lat},${lng}`);
  }else alert("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª");
}

function getLocation(latId,lngId){
  navigator.geolocation.getCurrentPosition(pos=>{
    document.getElementById(latId).value=pos.coords.latitude.toFixed(6);
    document.getElementById(lngId).value=pos.coords.longitude.toFixed(6);
  });
}

/* ===== Ø§Ù„Ø²ÙˆØ§ÙŠØ§ ===== */
function addCorner(){
  corners.innerHTML+=`
  <div class="row">
    <input placeholder="Lat">
    <input placeholder="Lng">
    <button class="del" onclick="this.parentElement.remove()">âˆ’</button>
  </div>`;
}

function dist(a,b,c,d){
  const R=6371000;
  let dLat=(c-a)*Math.PI/180;
  let dLng=(d-b)*Math.PI/180;
  let x=Math.sin(dLat/2)**2+
    Math.cos(a*Math.PI/180)*Math.cos(c*Math.PI/180)*
    Math.sin(dLng/2)**2;
  return R*2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));
}

function calcDistances(){
  let pts=[];
  document.querySelectorAll("#corners .row").forEach(r=>{
    let i=r.querySelectorAll("input");
    if(i[0].value && i[1].value)
      pts.push([+i[0].value,+i[1].value]);
  });
  if(pts.length<2){cornerResult.innerHTML="Ø£Ø¯Ø®Ù„ Ø²ÙˆØ§ÙŠØ§ ÙƒØ§ÙÙŠØ©";return;}
  let txt="";
  for(let i=0;i<pts.length-1;i++){
    txt+=`Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø²Ø§ÙˆÙŠØ© ${i+1} Ùˆ ${i+2}: ${dist(
      pts[i][0],pts[i][1],pts[i+1][0],pts[i+1][1]
    ).toFixed(1)} Ù…<br>`;
  }
  cornerResult.innerHTML=txt;
}

/* ===== Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø£Ø±Ø¶ ===== */
landArea.oninput=function(){
  let m=+this.value;
  if(!m){landResult.innerHTML="";return;}
  landResult.innerHTML=
    `Ù‡ÙƒØªØ§Ø±: ${(m/10000).toFixed(3)}<br>
     Ø¯ÙˆÙ†Ù…: ${(m/1000).toFixed(2)}`;
};

/* ===== Ø§Ù„Ø¢Ø¨Ø§Ø± ===== */
function addWell(){
  wells.innerHTML+=`
  <div class="row">
    <input placeholder="Lat">
    <input placeholder="Lng">
    <button class="gray" onclick="openMapFromRow(this)">Ø®Ø±ÙŠØ·Ø©</button>
    <button class="del" onclick="this.parentElement.remove()">âˆ’</button>
  </div>`;
}
function openMapFromRow(btn){
  let i=btn.parentElement.querySelectorAll("input");
  window.open(`https://www.google.com/maps?q=${i[0].value},${i[1].value}`);
}

/* ===== Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ÙŠ ===== */
function addIrrigation(){
  irrigation.innerHTML+=`
  <div class="result">
    <select onchange="calcPivot(this)">
      <option value="">Ù†ÙˆØ¹ Ø§Ù„Ø±ÙŠ</option>
      <option value="pivot">Ø±Ø´Ø§Ø´ Ù…Ø­ÙˆØ±ÙŠ</option>
      <option value="drip">ØªÙ†Ù‚ÙŠØ·</option>
      <option value="flood">ØºÙ…Ø±</option>
    </select>
    <input placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¨Ø±Ø§Ø¬" oninput="calcPivot(this)">
    <div class="res"></div>
    <button class="del" onclick="this.parentElement.remove()">âˆ’</button>
  </div>`;
}

function calcPivot(el){
  let box=el.parentElement;
  let type=box.querySelector("select").value;
  let n=+box.querySelector("input").value;
  let r=box.querySelector(".res");
  if(type==="pivot" && n>0){
    let radius=n*50;
    let area=Math.PI*radius*radius;
    r.innerHTML=
      `Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ù…Â²: ${area.toFixed(1)}<br>
       Ù‡ÙƒØªØ§Ø±: ${(area/10000).toFixed(2)}<br>
       Ø¯ÙˆÙ†Ù…: ${(area/1000).toFixed(1)}`;
  }else r.innerHTML="";
}

/* ===== Ø§Ù„Ù…Ø²Ø±ÙˆØ¹Ø§Øª ===== */
function addCrop(){
  crops.innerHTML+=`
  <div class="row">
    <input placeholder="Ø§Ù„Ù…Ø²Ø±ÙˆØ¹">
    <input placeholder="Ø§Ù„Ø¹Ø¯Ø¯">
    <button class="del" onclick="this.parentElement.remove()">âˆ’</button>
  </div>`;
}

/* ===== Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø§Øª ===== */
function addAsset(){
  assets.innerHTML+=`
  <div class="row">
    <input placeholder="Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯">
    <input placeholder="Ø§Ù„Ø¹Ø¯Ø¯">
    <button class="del" onclick="this.parentElement.remove()">âˆ’</button>
  </div>`;
}
</script>

</body>
</html>